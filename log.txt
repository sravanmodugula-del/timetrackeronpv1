# FMB TimeTracker Simple Deployment Script
param(
    [string]$InstallPath = "C:\fmb-timetracker"
)

Write-Host "ğŸš€ FMB TimeTracker Deployment" -ForegroundColor Green

# Check admin privileges
if (-NOT ([Security.Principal.WindowsPrincipal] [Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole] "Administrator")) {
    Write-Host "âŒ Run as Administrator" -ForegroundColor Red
    exit 1
}

# Create logs directory
if (-not (Test-Path "$InstallPath\logs")) {
    New-Item -ItemType Directory -Path "$InstallPath\logs" -Force | Out-Null
}

# Check .env file
if (-not (Test-Path ".env")) {
    if (Test-Path "fmb-onprem/.env.fmb-onprem") {
        Copy-Item "fmb-onprem/.env.fmb-onprem" ".env"
        Write-Host "âœ… Environment file copied" -ForegroundColor Green
    } else {
        Write-Host "âŒ No .env file found" -ForegroundColor Red
        exit 1
    }
}

# Stop existing processes
Write-Host "â¹ï¸ Stopping application..." -ForegroundColor Yellow
npx pm2 delete fmb-timetracker 2>$null

# Install dependencies
Write-Host "ğŸ“¦ Installing dependencies..." -ForegroundColor Yellow
npm install --legacy-peer-deps

# Build application
Write-Host "ğŸ”¨ Building..." -ForegroundColor Yellow
npm run build

if (-not (Test-Path "dist/index.js")) {
    Write-Host "âŒ Build failed" -ForegroundColor Red
    exit 1
}

# Start application
Write-Host "â–¶ï¸ Starting application..." -ForegroundColor Yellow
npx pm2 start ecosystem.config.cjs

# Wait and check status
Start-Sleep -Seconds 15
$status = npx pm2 jlist | ConvertFrom-Json
$app = $status | Where-Object { $_.name -eq "fmb-timetracker" }

if ($app -and $app.pm2_env.status -eq "online") {
    Write-Host "âœ… Deployment successful!" -ForegroundColor Green
    Write-Host "ğŸŒ Check: http://localhost:3000" -ForegroundColor Green
    
    # Health check
    Start-Sleep -Seconds 5
    try {
        $response = Invoke-WebRequest -Uri "http://localhost:3000/health" -UseBasicParsing -TimeoutSec 10
        if ($response.StatusCode -eq 200) {
            Write-Host "âœ… Health check passed" -ForegroundColor Green
        }
    } catch {
        Write-Host "âš ï¸ Health check failed - check logs" -ForegroundColor Yellow
    }
} else {
    Write-Host "âŒ Deployment failed" -ForegroundColor Red
    npx pm2 logs fmb-timetracker --lines 10
    exit 1
}

Write-Host "ğŸ“‹ Commands: npx pm2 status | npx pm2 logs" -ForegroundColor Cyan

2025-09-02T12:41:46: 2025-09-02T19:41:46.501Z ğŸŸ¢ [SERVER] Starting FMB TimeTracker On-Premises Application...
2025-09-02T12:41:46: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
2025-09-02T12:41:46: [dotenv@17.2.1] injecting env (23) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
2025-09-02T12:41:46: ğŸ¢ FMB On-Premises configuration loaded
2025-09-02T12:41:46: ğŸ” [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-09-02T12:41:46: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-09-02T12:41:46: ğŸ” [FMB-CONFIG] Certificate length: 1004 characters
2025-09-02T12:41:46: 2025-09-02T19:41:46.507Z ğŸŸ¢ [FMB-ONPREM] FMB On-premises environment initialized
2025-09-02T12:41:46: 2025-09-02T19:41:46.507Z ğŸŸ¢ [CONFIG] FMB session secret validated successfully
2025-09-02T12:41:46: ğŸ”— Connecting to FMB MS SQL database...
2025-09-02T12:41:46: âœ… FMB Database connection established successfully
2025-09-02T12:41:46: 2025-09-02T19:41:46.613Z ğŸŸ¢ [DATABASE] FMB Database initialization completed successfully
2025-09-02T12:41:46: 2025-09-02T19:41:46.617Z ğŸŸ¢ [SESSION] FMB Enterprise Session configured for production mode
2025-09-02T12:41:46: 2025-09-02T19:41:46.618Z ğŸŸ¢ [SESSION] Using memory session store for development/testing
2025-09-02T12:41:46: 2025-09-02T19:41:46.618Z ğŸŸ¢ [SESSION] Session store initialization completed
2025-09-02T12:41:46: Warning: connect.session() MemoryStore is not
2025-09-02T12:41:46: designed for a production environment, as it will leak
2025-09-02T12:41:46: memory, and will not scale past a single process.
2025-09-02T12:41:46: 2025-09-02T19:41:46.618Z ğŸŸ¢ [SERVER] FMB Session middleware configured successfully
2025-09-02T12:41:46: 2025-09-02T19:41:46.622Z ğŸŸ¢ [SECURITY] Enterprise session security middleware activated
2025-09-02T12:41:46: ğŸš€ Setting up FMB SAML Authentication for On-Premises environment...
2025-09-02T12:41:46: 2025-09-02T19:41:46.626Z ğŸ”µ [FMB-SAML] Initializing FMB SAML Authentication
2025-09-02T12:41:46: ğŸ”§ [FMB-DATABASE] Creating new FMB storage instance...
2025-09-02T12:41:46: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com
2025-09-02T12:41:46: [dotenv@17.2.1] injecting env (0) from .env -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com
2025-09-02T12:41:46: ğŸ¢ FMB On-Premises configuration loaded
2025-09-02T12:41:46: ğŸ” [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-09-02T12:41:46: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-09-02T12:41:46: ğŸ” [FMB-CONFIG] Certificate length: 1004 characters
2025-09-02T12:41:46: ğŸ”— [FMB-STORAGE] Connecting to FMB MS SQL Server...
2025-09-02T12:41:46: 2025-09-02T19:41:46.631Z ğŸŸ¢ [FMB-SAML] SAML Certificate validation {
2025-09-02T12:41:46:   "certLength": 1004,
2025-09-02T12:41:46:   "hasBeginMarker": true,
2025-09-02T12:41:46:   "hasEndMarker": true
2025-09-02T12:41:46: }
2025-09-02T12:41:46: 2025-09-02T19:41:46.633Z ğŸ”µ [FMB-SAML] FMB SAML Authentication setup completed
2025-09-02T12:41:46: ğŸ›¡ï¸ [SESSION-MGMT] Enterprise session management routes registered
2025-09-02T12:41:46: ğŸ›¡ï¸ [SESSION-MGMT] Enterprise session management routes registered
2025-09-02T12:41:46: 2025-09-02T19:41:46.640Z ğŸŸ¢ [SERVER] FMB TimeTracker running on http://0.0.0.0:3000
2025-09-02T12:41:46: 2025-09-02T19:41:46.640Z ğŸŸ¢ [SERVER] Environment: fmb-onprem
2025-09-02T12:41:46: 2025-09-02T19:41:46.640Z ğŸŸ¢ [FMB-ONPREM] On-premises deployment active - SAML authentication enabled
2025-09-02T12:41:46: 2025-09-02T19:41:46.707Z ğŸ—„ï¸ [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
2025-09-02T12:42:22: 2025-09-02T19:42:22.542Z ğŸ”µ [FMB-SAML] SAML ACS callback received - IdP-initiated flow {
2025-09-02T12:42:22:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:22:   "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
2025-09-02T12:42:22:   "timestamp": "2025-09-02T19:42:22.542Z",
2025-09-02T12:42:22:   "hasBody": true,
2025-09-02T12:42:22:   "bodyKeys": [
2025-09-02T12:42:22:     "SAMLResponse"
2025-09-02T12:42:22:   ],
2025-09-02T12:42:22:   "headers": {
2025-09-02T12:42:22:     "content-type": "application/x-www-form-urlencoded",
2025-09-02T12:42:22:     "content-length": "8093"
2025-09-02T12:42:22:   }
2025-09-02T12:42:22: }
2025-09-02T12:42:22: 2025-09-02T19:42:22.611Z ğŸ”µ [FMB-SAML] SAML profile received {
2025-09-02T12:42:22:   "nameID": "Sravan.Modugula@fmb.com",
2025-09-02T12:42:22:   "email": "Sravan.Modugula@fmb.com",
2025-09-02T12:42:22:   "firstName": "Sravan",
2025-09-02T12:42:22:   "lastName": "Modugula"
2025-09-02T12:42:22: }
2025-09-02T12:42:22: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:22: 2025-09-02T19:42:22.718Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842142612-tlbp78', recordCount: 1 }
2025-09-02T12:42:22: ğŸ”„ [SQL] 
2025-09-02T12:42:22:  operation on users
2025-09-02T12:42:22: ğŸ—„ï¸ [SQL] Executing with 7 parameters
2025-09-02T12:42:22: âœ… [SQL] Operation completed: 1 rows affected
2025-09-02T12:42:22: 2025-09-02T19:42:22.763Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842142719-zj8nhj', recordCount: 0 }
2025-09-02T12:42:22: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:22: 2025-09-02T19:42:22.793Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842142763-gtl82b', recordCount: 1 }
2025-09-02T12:42:22: 2025-09-02T19:42:22.793Z ğŸ”µ [FMB-SAML] User upserted in database {
2025-09-02T12:42:22:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:22: }
2025-09-02T12:42:22: 2025-09-02T19:42:22.793Z ğŸ”µ [FMB-SAML] User authenticated and stored {
2025-09-02T12:42:22:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:22: }
2025-09-02T12:42:22: 2025-09-02T19:42:22.795Z ğŸŸ¢ [FMB-SAML] Serializing user for session {
2025-09-02T12:42:22:   "userId": "user-1756655138413",
2025-09-02T12:42:22:   "timestamp": "2025-09-02T19:42:22.795Z",
2025-09-02T12:42:22:   "source": "saml"
2025-09-02T12:42:22: }
2025-09-02T12:42:22: ğŸ”µ [FMB-SAML] User session established and saved: Sravan.Modugula@fmb.com
2025-09-02T12:42:22: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:22: 2025-09-02T19:42:22.882Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842142852-h60bgz', recordCount: 1 }
2025-09-02T12:42:22: 2025-09-02T19:42:22.882Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:22:   "userId": "user-1756655138413",
2025-09-02T12:42:22:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:22: }
2025-09-02T12:42:22: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:22: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:22: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:22: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:22: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:22: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:22: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:23: 2025-09-02T19:42:23.004Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842142975-mbixr9', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.005Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.036Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842142978-pl42s8', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.036Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.062Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842142979-kvf9xe', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.062Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.069Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842142989-ib78wf', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.069Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.077Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842142992-ufdppk', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.078Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.080Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842142998-pzkoxl', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.080Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.086Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842142999-0tdp84', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.086Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:23: 2025-09-02T19:42:23.308Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842143279-xu6wwu', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.308Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.309Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:42:23:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:23:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:23:   "isAuthenticated": true
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.309Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:23: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:23: 2025-09-02T19:42:23.339Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842143310-kf7fio', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.343Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842143313-zhlg0r', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.343Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:23: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:23: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:23: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:23: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:23: 2025-09-02T19:42:23.453Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842143424-8byev4', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.454Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.454Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:42:23:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:23:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:23:   "isAuthenticated": true
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.454Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:23: 2025-09-02T19:42:23.456Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842143426-kknt43', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.456Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.457Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/organizations {
2025-09-02T12:42:23:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:23:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:23:   "isAuthenticated": true
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.457Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.457Z ğŸ—„ï¸ [FMB-STORAGE] GET_USER_ORGS: Fetching organizations for user { userId: 'user-1756655138413' }
2025-09-02T12:42:23: 2025-09-02T19:42:23.458Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842143428-b3hnxe', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.459Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.459Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/dashboard/stats {
2025-09-02T12:42:23:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:23:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:23:   "isAuthenticated": true
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.459Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: ğŸ—„ï¸ [SQL] Executing with 3 parameters
2025-09-02T12:42:23: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:23: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:23: 2025-09-02T19:42:23.463Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842143429-3xv1wx', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.463Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.463Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/dashboard/project-breakdown {
2025-09-02T12:42:23:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:23:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:23:   "isAuthenticated": true
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.463Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.464Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842143430-l8vvt5', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.465Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.465Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/dashboard/recent-activity {
2025-09-02T12:42:23:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:23:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:23:   "isAuthenticated": true
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.465Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:23:   "userId": "user-1756655138413",
2025-09-02T12:42:23:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:23: }
2025-09-02T12:42:23: 2025-09-02T19:42:23.485Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842143454-2bdlsp', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.489Z ğŸ—„ï¸ [FMB-STORAGE] GET_USER_ORGS: User organizations fetched successfully { userId: 'user-1756655138413', count: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.491Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842143459-66gyiz', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.492Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842143460-pz8oyg', recordCount: 1 }
2025-09-02T12:42:23: 2025-09-02T19:42:23.494Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842143460-w0papg', recordCount: 1 }
2025-09-02T12:42:25: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:25: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:25: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:25: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:25: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:25: 2025-09-02T19:42:25.333Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842145304-889zo7', recordCount: 1 }
2025-09-02T12:42:25: 2025-09-02T19:42:25.333Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:25:   "userId": "user-1756655138413",
2025-09-02T12:42:25:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:25: }
2025-09-02T12:42:25: 2025-09-02T19:42:25.333Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:42:25:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:25:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:25:   "isAuthenticated": true
2025-09-02T12:42:25: }
2025-09-02T12:42:25: 2025-09-02T19:42:25.333Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:25:   "userId": "user-1756655138413",
2025-09-02T12:42:25:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:25: }
2025-09-02T12:42:25: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:25: 2025-09-02T19:42:25.334Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842145306-sjclep', recordCount: 1 }
2025-09-02T12:42:25: 2025-09-02T19:42:25.334Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:25:   "userId": "user-1756655138413",
2025-09-02T12:42:25:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:25: }
2025-09-02T12:42:25: 2025-09-02T19:42:25.334Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/users/current-role {
2025-09-02T12:42:25:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:25:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:25:   "isAuthenticated": true
2025-09-02T12:42:25: }
2025-09-02T12:42:25: 2025-09-02T19:42:25.334Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:25:   "userId": "user-1756655138413",
2025-09-02T12:42:25:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:25: }
2025-09-02T12:42:25: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:25: 2025-09-02T19:42:25.337Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842145307-vjg9qg', recordCount: 1 }
2025-09-02T12:42:25: 2025-09-02T19:42:25.337Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:25:   "userId": "user-1756655138413",
2025-09-02T12:42:25:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:25: }
2025-09-02T12:42:25: 2025-09-02T19:42:25.338Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842145310-fjzde8', recordCount: 1 }
2025-09-02T12:42:25: 2025-09-02T19:42:25.339Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:25:   "userId": "user-1756655138413",
2025-09-02T12:42:25:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:25: }
2025-09-02T12:42:25: 2025-09-02T19:42:25.346Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842145318-2opxwh', recordCount: 1 }
2025-09-02T12:42:25: 2025-09-02T19:42:25.346Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:25:   "userId": "user-1756655138413",
2025-09-02T12:42:25:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:25: }
2025-09-02T12:42:25: 2025-09-02T19:42:25.361Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842145333-4500vh', recordCount: 1 }
2025-09-02T12:42:25: 2025-09-02T19:42:25.365Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842145335-ax1tzi', recordCount: 1 }
2025-09-02T12:42:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:27: 2025-09-02T19:42:27.984Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842147955-2i74i9', recordCount: 1 }
2025-09-02T12:42:27: 2025-09-02T19:42:27.985Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:27:   "userId": "user-1756655138413",
2025-09-02T12:42:27:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:27: }
2025-09-02T12:42:27: 2025-09-02T19:42:27.985Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for POST /api/users/change-role {
2025-09-02T12:42:27:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:27:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:27:   "isAuthenticated": true
2025-09-02T12:42:27: }
2025-09-02T12:42:27: 2025-09-02T19:42:27.985Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:27:   "userId": "user-1756655138413",
2025-09-02T12:42:27:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:27: }
2025-09-02T12:42:27: ğŸ—„ï¸ [FMB-STORAGE] UPDATE_USER_ROLE: { userId: 'user-1756655138413', role: 'admin' }
2025-09-02T12:42:28: âœ… [FMB-STORAGE] UPDATE_USER_ROLE: Role updated successfully
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: 2025-09-02T19:42:28.133Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148106-vdi250', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.134Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.134Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:42:28:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:28:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:28:   "isAuthenticated": true
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.134Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: 2025-09-02T19:42:28.136Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148104-39qsky', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.136Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.137Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/users/current-role {
2025-09-02T12:42:28:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:28:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:28:   "isAuthenticated": true
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.137Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: 2025-09-02T19:42:28.138Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148106-p6wtcr', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.138Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.163Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148134-lekprg', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.167Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148137-w282bh', recordCount: 1 }
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: 2025-09-02T19:42:28.241Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148212-mwzkp7', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.242Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.243Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148214-0agp3v', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.243Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.245Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148215-cr8e9p', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.245Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.247Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148216-k8sxvq', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.247Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.250Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148218-w7jlry', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.250Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.251Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148220-ijv60q', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.252Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.253Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148220-rchyzy', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.253Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: 2025-09-02T19:42:28.414Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148385-afjeun', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.415Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.415Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:42:28:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:28:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:28:   "isAuthenticated": true
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.415Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: 2025-09-02T19:42:28.437Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148410-75cgrc', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.438Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.443Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148415-n1txrc', recordCount: 1 }
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: 2025-09-02T19:42:28.582Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148551-3l4rwy', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.582Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.582Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:42:28:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:28:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:28:   "isAuthenticated": true
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.582Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: 2025-09-02T19:42:28.584Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148553-6drhcy', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.584Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.584Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/users/current-role {
2025-09-02T12:42:28:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:28:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:28:   "isAuthenticated": true
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.584Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:28: 2025-09-02T19:42:28.585Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148555-khuw9z', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.586Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.587Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148556-i4m4zq', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.587Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:28:   "userId": "user-1756655138413",
2025-09-02T12:42:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:28: }
2025-09-02T12:42:28: 2025-09-02T19:42:28.612Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148582-y2g8pr', recordCount: 1 }
2025-09-02T12:42:28: 2025-09-02T19:42:28.613Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842148584-2ds42c', recordCount: 1 }
2025-09-02T12:42:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:30: 2025-09-02T19:42:30.680Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842150653-cqo3xe', recordCount: 1 }
2025-09-02T12:42:30: 2025-09-02T19:42:30.680Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:30:   "userId": "user-1756655138413",
2025-09-02T12:42:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:30: }
2025-09-02T12:42:30: 2025-09-02T19:42:30.681Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:42:30:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:30:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:30:   "isAuthenticated": true
2025-09-02T12:42:30: }
2025-09-02T12:42:30: 2025-09-02T19:42:30.681Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:30:   "userId": "user-1756655138413",
2025-09-02T12:42:30:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:30: }
2025-09-02T12:42:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:30: 2025-09-02T19:42:30.683Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842150654-njzl8x', recordCount: 1 }
2025-09-02T12:42:30: 2025-09-02T19:42:30.683Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:30:   "userId": "user-1756655138413",
2025-09-02T12:42:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:30: }
2025-09-02T12:42:30: 2025-09-02T19:42:30.684Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/organizations {
2025-09-02T12:42:30:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:30:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:30:   "isAuthenticated": true
2025-09-02T12:42:30: }
2025-09-02T12:42:30: 2025-09-02T19:42:30.684Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:30:   "userId": "user-1756655138413",
2025-09-02T12:42:30:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:30: }
2025-09-02T12:42:30: 2025-09-02T19:42:30.684Z ğŸ—„ï¸ [FMB-STORAGE] GET_USER_ORGS: Fetching organizations for user { userId: 'user-1756655138413' }
2025-09-02T12:42:30: 2025-09-02T19:42:30.685Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842150656-p96kn0', recordCount: 1 }
2025-09-02T12:42:30: 2025-09-02T19:42:30.685Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:30:   "userId": "user-1756655138413",
2025-09-02T12:42:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:30: }
2025-09-02T12:42:30: 2025-09-02T19:42:30.685Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/projects {
2025-09-02T12:42:30:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:30:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:30:   "isAuthenticated": true
2025-09-02T12:42:30: }
2025-09-02T12:42:30: 2025-09-02T19:42:30.685Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:30:   "userId": "user-1756655138413",
2025-09-02T12:42:30:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:30: }
2025-09-02T12:42:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:30: 2025-09-02T19:42:30.686Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842150657-wl2kwh', recordCount: 1 }
2025-09-02T12:42:30: 2025-09-02T19:42:30.686Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:30:   "userId": "user-1756655138413",
2025-09-02T12:42:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:30: }
2025-09-02T12:42:30: 2025-09-02T19:42:30.687Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/tasks/all {
2025-09-02T12:42:30:   "ip": "192.168.209.85:53719",
2025-09-02T12:42:30:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79",
2025-09-02T12:42:30:   "isAuthenticated": true
2025-09-02T12:42:30: }
2025-09-02T12:42:30: 2025-09-02T19:42:30.687Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:42:30:   "userId": "user-1756655138413",
2025-09-02T12:42:30:   "sessionId": "1b955e0df356724dc355bba2c5eb20d3df7b56b80a277a338a6fbd2cfc49fd79"
2025-09-02T12:42:30: }
2025-09-02T12:42:30: ğŸ“‹ Fetching all user tasks for user: user-1756655138413
2025-09-02T12:42:30: 2025-09-02T19:42:30.688Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842150658-1r8npj', recordCount: 1 }
2025-09-02T12:42:30: 2025-09-02T19:42:30.689Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:30:   "userId": "user-1756655138413",
2025-09-02T12:42:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:30: }
2025-09-02T12:42:30: 2025-09-02T19:42:30.707Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842150681-a0v0m6', recordCount: 1 }
2025-09-02T12:42:30: 2025-09-02T19:42:30.710Z ğŸ—„ï¸ [FMB-STORAGE] GET_USER_ORGS: User organizations fetched successfully { userId: 'user-1756655138413', count: 1 }
2025-09-02T12:42:30: 2025-09-02T19:42:30.715Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842150686-3rkznd', recordCount: 2 }
2025-09-02T12:42:30: âœ… Found tasks: 1
2025-09-02T12:42:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:42:33: 2025-09-02T19:42:33.937Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842153909-a23pkn', recordCount: 1 }
2025-09-02T12:42:33: 2025-09-02T19:42:33.938Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:42:33:   "userId": "user-1756655138413",
2025-09-02T12:42:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:42:33: }
