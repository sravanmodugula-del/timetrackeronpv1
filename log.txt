PS C:\Users\ADM91381> cd..

PS C:\Users> cd..

PS C:\> cd .\fmb-timetracker

PS C:\fmb-timetracker> # FMB TimeTracker Simple Deployment Script
param(
    [string]$InstallPath = "C:\fmb-timetracker"
)

Write-Host "🚀 FMB TimeTracker Deployment" -ForegroundColor Green

# Check admin privileges
if (-NOT ([Security.Principal.WindowsPrincipal] [Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole] "Administrator")) {
    Write-Host "❌ Run as Administrator" -ForegroundColor Red
    exit 1
}

# Create logs directory
if (-not (Test-Path "$InstallPath\logs")) {
    New-Item -ItemType Directory -Path "$InstallPath\logs" -Force | Out-Null
}

# Check .env file
if (-not (Test-Path ".env")) {
    if (Test-Path "fmb-onprem/.env.fmb-onprem") {
        Copy-Item "fmb-onprem/.env.fmb-onprem" ".env"
        Write-Host "✅ Environment file copied" -ForegroundColor Green
    } else {
        Write-Host "❌ No .env file found" -ForegroundColor Red
        exit 1
    }
}

# Stop existing processes
Write-Host "⏹️ Stopping application..." -ForegroundColor Yellow
npx pm2 delete fmb-timetracker 2>$null

# Install dependencies
Write-Host "📦 Installing dependencies..." -ForegroundColor Yellow
npm install --legacy-peer-deps

# Build application
Write-Host "🔨 Building..." -ForegroundColor Yellow
npm run build

if (-not (Test-Path "dist/index.js")) {
    Write-Host "❌ Build failed" -ForegroundColor Red
    exit 1
}

# Start application
Write-Host "▶️ Starting application..." -ForegroundColor Yellow
npx pm2 start ecosystem.config.cjs

# Wait and check status
Start-Sleep -Seconds 15
$status = npx pm2 jlist | ConvertFrom-Json
$app = $status | Where-Object { $_.name -eq "fmb-timetracker" }

if ($app -and $app.pm2_env.status -eq "online") {
    Write-Host "✅ Deployment successful!" -ForegroundColor Green
    Write-Host "🌐 Check: http://localhost:3000" -ForegroundColor Green
    
    # Health check
    Start-Sleep -Seconds 5
    try {
        $response = Invoke-WebRequest -Uri "http://localhost:3000/health" -UseBasicParsing -TimeoutSec 10
        if ($response.StatusCode -eq 200) {
            Write-Host "✅ Health check passed" -ForegroundColor Green
        }
    } catch {
        Write-Host "⚠️ Health check failed - check logs" -ForegroundColor Yellow
    }
} else {
    Write-Host "logs" -ForegroundColor Red
    npx pm2 logs fmb-timetracker --lines 10
    exit 1
}

Write-Host "📋 Commands: npx pm2 status | npx pm2 logs" -ForegroundColor Cyan
🚀 FMB TimeTracker Deployment
⏹️ Stopping application...
[PM2] Applying action deleteProcessId on app [fmb-timetracker](ids: [ 0 ])
[PM2] [fmb-timetracker](0) âœ“
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â
”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name      â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â
”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
📦 Installing dependencies...

up to date, audited 804 packages in 3s

111 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (1 low, 5 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
🔨 Building...

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

[36mvite v7.1.3 [32mbuilding for production...[36m[39m
transforming...
[32mâœ“[39m 2077 modules transformed.
rendering chunks...
computing gzip size...
[2m../dist/public/[22m[32mindex.html                 [39m[1m[2m  0.86 kB[22m[1m[22m[2m â”‚ gzip:   0.44 kB[22m
[2m../dist/public/[22m[35massets/index-81F4Kgy-.css  [39m[1m[2m 70.03 kB[22m[1m[22m[2m â”‚ gzip:  12.48 kB[22m
[2m../dist/public/[22m[36massets/index-DcguImM-.js   [39m[1m[33m635.18 kB[39m[22m[2m â”‚ gzip: 179.38 kB[22m
node.exe : [33m
At line:1 char:1
+ & "C:\Program Files\nodejs/node.exe" "C:\Program Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: ([33m:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.[39m
[32mâœ“ built in 7.91s[39m
X [ERROR] Expected "}" but found "disableRequestedAuthnContext"
    fmb-onprem/auth/fmb-saml-auth.ts:47:6:
      47 â”‚       disableRequestedAuthnContext: true,
         â”‚       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
         â•µ       }
1 error
node:child_process:954
    throw err;
    ^
Error: Command failed: C:\fmb-timetracker\node_modules\@esbuild\win32-x64\esbuild.exe server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist
    at genericNodeError (node:internal/errors:983:15)
    at wrappedFn (node:internal/errors:537:14)
    at checkExecSyncError (node:child_process:915:11)
    at Object.execFileSync (node:child_process:951:15)
    at Object.<anonymous> (C:\fmb-timetracker\node_modules\esbuild\bin\esbuild:222:28)
    at Module._compile (node:internal/modules/cjs/loader:1688:14)
    at Object..js (node:internal/modules/cjs/loader:1820:10)
    at Module.load (node:internal/modules/cjs/loader:1423:32)
    at Function._load (node:internal/modules/cjs/loader:1246:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14) {
  status: 1,
  signal: null,
  output: [ null, null, null ],
  pid: 16776,
  stdout: null,
  stderr: null
}
Node.js v22.18.0
▶️ Starting application...
[PM2][WARN] Applications fmb-timetracker not running, starting...
[PM2] App [fmb-timetracker] launched (1 instances)
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â
”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”
€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name               â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â
”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”
€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ fmb-timetracker    â”‚ default     â”‚ 1.0.0   â”‚ fork    â”‚ 17164    â”‚ 0s     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 61.7mb   â”‚ ADM91381 â”‚ disabled â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â
”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
€â”€â”€â”€â”€â”€â”€â”˜
ConvertFrom-Json : Cannot convert the JSON string because a dictionary that was converted from the string contains the duplicated keys 'USERNAME' and 'username'.
At line:53 char:27
+ $status = npx pm2 jlist | ConvertFrom-Json
+                           ~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (:) [ConvertFrom-Json], InvalidOperationException
    + FullyQualifiedErrorId : DuplicateKeysInJsonString,Microsoft.PowerShell.Commands.ConvertFromJsonCommand
 
logs
[TAILING] Tailing last 10 lines for [fmb-timetracker] process (change the value with --lines option)
C:\fmb-timetracker\logs\err-0.log last 10 lines:
0|fmb-time | 2025-08-30T22:25:25:     at checkDatabaseHealth2 (file:///C:/fmb-timetracker/dist/index.js:2694:20)
0|fmb-time | 2025-08-30T22:25:25:     at file:///C:/fmb-timetracker/dist/index.js:3631:31
0|fmb-time | 2025-08-30T22:25:25:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
0|fmb-time | 2025-08-30T22:25:25:     at next (C:\fmb-timetracker\node_modules\express\lib\router\route.js:149:13)
0|fmb-time | 2025-08-30T22:25:25:     at Route.dispatch (C:\fmb-timetracker\node_modules\express\lib\router\route.js:119:3)
0|fmb-time | 2025-08-30T22:25:25:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
0|fmb-time | 2025-08-30T22:25:25:     at C:\fmb-timetracker\node_modules\express\lib\router\index.js:284:15
0|fmb-time | 2025-08-30T22:25:25:     at Function.process_params (C:\fmb-timetracker\node_modules\express\lib\router\index.js:346:12)
0|fmb-time | 2025-08-30T22:25:25:     at next (C:\fmb-timetracker\node_modules\express\lib\router\index.js:280:10)
0|fmb-time | 2025-08-30T22:25:25:     at strategy.pass (C:\fmb-timetracker\node_modules\passport\lib\middleware\authenticate.js:355:9)

C:\fmb-timetracker\logs\out-0.log last 10 lines:
0|fmb-time | ode-saml\\node-saml\\lib\\saml.js:103:19)\n    at new SAML (C:\\fmb-timetracker\\node_modules\\@node-saml\\node-saml\\lib\\saml.js:43:29)\n    at new AbstractStrategy (C:\\fmb-timetracker\\nod
e_modules\\@node-saml\\passport-saml\\lib\\strategy.js:28:26)\n    at new Strategy (C:\\fmb-timetracker\\node_modules\\@node-saml\\passport-saml\\lib\\strategy.js:215:1)\n    at setupFmbSamlAuth (file:///C
:/fmb-timetracker/dist/index.js:1291:24)\n    at registerRoutes (file:///C:/fmb-timetracker/dist/index.js:2771:9)\n    at async createServer2 (file:///C:/fmb-timetracker/dist/index.js:4024:3)",
0|fmb-time | 2025-08-30T23:27:17:   "errorType": "object",
0|fmb-time | 2025-08-30T23:27:17:   "errorConstructor": "TypeError",
0|fmb-time | 2025-08-30T23:27:17:   "serializedError": "{\"stack\":\"TypeError: validateInResponseTo must be one of ['never', 'ifPresent', 'always']\\n    at SAML.initialize (C:\\\\fmb-timetracker\\\\node_
modules\\\\@node-saml\\\\node-saml\\\\lib\\\\saml.js:103:19)\\n    at new SAML (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\node-saml\\\\lib\\\\saml.js:43:29)\\n    at new AbstractStrategy (C:\\
\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\passport-saml\\\\lib\\\\strategy.js:28:26)\\n    at new Strategy (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\passport-saml\\\\lib\\\\strategy.
js:215:1)\\n    at setupFmbSamlAuth (file:///C:/fmb-timetracker/dist/index.js:1291:24)\\n    at registerRoutes (file:///C:/fmb-timetracker/dist/index.js:2771:9)\\n    at async createServer2 (file:///C:/fmb
-timetracker/dist/index.js:4024:3)\",\"message\":\"validateInResponseTo must be one of ['never', 'ifPresent', 'always']\"}"
0|fmb-time | 2025-08-30T23:27:17: }
0|fmb-time | 2025-08-30T23:27:17: 2025-08-31T06:27:17.926Z ðŸ—„ï¸ [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
0|fmb-time | 2025-08-30T23:27:18: ðŸŸ¢ [FMB-SESSION] Session table structure verified
0|fmb-time | 2025-08-30T23:27:18: 2025-08-31T06:27:18.313Z ðŸ”´ [SERVER] Exiting due to startup failure
0|fmb-time | 2025-08-30T23:27:18: ðŸŸ¡ [FMB-SESSION] Initiating graceful shutdown...

0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.754Z ðŸŸ¢ [SERVER] Starting FMB TimeTracker On-Premises Application...
0|fmb-timetracker  | 2025-08-30T23:27:22: [dotenv@17.2.1] injecting env (26) from fmb-onprem\.env.fmb-onprem -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild
0|fmb-timetracker  | 2025-08-30T23:27:22: [dotenv@17.2.1] injecting env (11) from .env -- tip: ðŸ“¡ auto-backup env with Radar: https://dotenvx.com/radar
0|fmb-timetracker  | 2025-08-30T23:27:22: ðŸ¢ FMB On-Premises configuration loaded
0|fmb-timetracker  | 2025-08-30T23:27:22: ðŸ” [FMB-CONFIG] Looking for certificate at: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:22: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:22: ðŸ” [FMB-CONFIG] Certificate length: 1004 characters
0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.760Z ðŸŸ¢ [FMB-ONPREM] FMB On-premises environment initialized
0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.761Z ðŸŸ¢ [CONFIG] FMB session secret validated successfully
0|fmb-timetracker  | 2025-08-30T23:27:22: ðŸ”— Connecting to FMB MS SQL database...
0|fmb-timetracker  | 2025-08-30T23:27:22: âœ… FMB Database connection established successfully
0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.978Z ðŸŸ¢ [DATABASE] FMB Database initialization completed successfully
0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.981Z ðŸŸ¢ [SESSION] FMB Enterprise Session configured for production mode
0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.982Z ðŸŸ¢ [SESSION] Initializing MS SQL session store for production
0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.983Z ðŸŸ¢ [SESSION] Custom MS SQL session store initialized successfully
0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.983Z ðŸŸ¢ [SESSION] Session store initialization completed
0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.984Z ðŸŸ¢ [SERVER] FMB Session middleware configured successfully
0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.986Z ðŸŸ¢ [SECURITY] Enterprise session security middleware activated
0|fmb-timetracker  | 2025-08-30T23:27:22: ðŸš€ Setting up FMB SAML Authentication for On-Premises environment...
0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.989Z ðŸ”µ [FMB-SAML] Initializing FMB SAML Authentication
0|fmb-timetracker  | 2025-08-30T23:27:22: ðŸ”§ [FMB-DATABASE] Creating new FMB storage instance...
0|fmb-timetracker  | 2025-08-30T23:27:22: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: âš™ï¸  override existing env vars with { override: true }
0|fmb-timetracker  | 2025-08-30T23:27:22: [dotenv@17.2.1] injecting env (0) from .env -- tip: ðŸ“¡ auto-backup env with Radar: https://dotenvx.com/radar
0|fmb-timetracker  | 2025-08-30T23:27:22: ðŸ¢ FMB On-Premises configuration loaded
0|fmb-timetracker  | 2025-08-30T23:27:22: ðŸ” [FMB-CONFIG] Looking for certificate at: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:22: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:22: ðŸ” [FMB-CONFIG] Certificate length: 1004 characters
0|fmb-timetracker  | 2025-08-30T23:27:22: ðŸ”— [FMB-STORAGE] Connecting to FMB MS SQL Server...
0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.992Z ðŸŸ¢ [FMB-SAML] SAML Certificate validation {
0|fmb-timetracker  | 2025-08-30T23:27:22:   "certLength": 1004,
0|fmb-timetracker  | 2025-08-30T23:27:22:   "hasBeginMarker": true,
0|fmb-timetracker  | 2025-08-30T23:27:22:   "hasEndMarker": true
0|fmb-timetracker  | 2025-08-30T23:27:22: }
0|fmb-timetracker  | 2025-08-30T23:27:22: 2025-08-31T06:27:22.993Z ðŸ”´ [SERVER] Critical server startup failure: {
0|fmb-timetracker  | 2025-08-30T23:27:22:   "message": "validateInResponseTo must be one of ['never', 'ifPresent', 'always']",
0|fmb-timetracker  | 2025-08-30T23:27:22:   "name": "TypeError",
0|fmb-timetracker  | 2025-08-30T23:27:22:   "code": "NO_CODE",
0|fmb-timetracker  | 2025-08-30T23:27:22:   "stack": "TypeError: validateInResponseTo must be one of ['never', 'ifPresent', 'always']\n    at SAML.initialize (C:\\fmb-timetracker\\node_modules\\@node-saml\
\node-saml\\lib\\saml.js:103:19)\n    at new SAML (C:\\fmb-timetracker\\node_modules\\@node-saml\\node-saml\\lib\\saml.js:43:29)\n    at new AbstractStrategy (C:\\fmb-timetracker\\node_modules\\@node-saml\
\passport-saml\\lib\\strategy.js:28:26)\n    at new Strategy (C:\\fmb-timetracker\\node_modules\\@node-saml\\passport-saml\\lib\\strategy.js:215:1)\n    at setupFmbSamlAuth (file:///C:/fmb-timetracker/dist
/index.js:1291:24)\n    at registerRoutes (file:///C:/fmb-timetracker/dist/index.js:2771:9)\n    at async createServer2 (file:///C:/fmb-timetracker/dist/index.js:4024:3)",
0|fmb-timetracker  | 2025-08-30T23:27:22:   "errorType": "object",
0|fmb-timetracker  | 2025-08-30T23:27:22:   "errorConstructor": "TypeError",
0|fmb-timetracker  | 2025-08-30T23:27:22:   "serializedError": "{\"stack\":\"TypeError: validateInResponseTo must be one of ['never', 'ifPresent', 'always']\\n    at SAML.initialize (C:\\\\fmb-timetracker\
\\\node_modules\\\\@node-saml\\\\node-saml\\\\lib\\\\saml.js:103:19)\\n    at new SAML (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\node-saml\\\\lib\\\\saml.js:43:29)\\n    at new AbstractStrate
gy (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\passport-saml\\\\lib\\\\strategy.js:28:26)\\n    at new Strategy (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\passport-saml\\\\lib\\\\s
trategy.js:215:1)\\n    at setupFmbSamlAuth (file:///C:/fmb-timetracker/dist/index.js:1291:24)\\n    at registerRoutes (file:///C:/fmb-timetracker/dist/index.js:2771:9)\\n    at async createServer2 (file:/
//C:/fmb-timetracker/dist/index.js:4024:3)\",\"message\":\"validateInResponseTo must be one of ['never', 'ifPresent', 'always']\"}"
0|fmb-timetracker  | 2025-08-30T23:27:22: }
0|fmb-timetracker  | 2025-08-30T23:27:23: 2025-08-31T06:27:23.098Z ðŸ—„ï¸ [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
0|fmb-timetracker  | 2025-08-30T23:27:23: ðŸŸ¢ [FMB-SESSION] Session table structure verified
0|fmb-timetracker  | 2025-08-30T23:27:23: 2025-08-31T06:27:23.493Z ðŸ”´ [SERVER] Exiting due to startup failure
0|fmb-timetracker  | 2025-08-30T23:27:23: ðŸŸ¡ [FMB-SESSION] Initiating graceful shutdown...
0|fmb-timetracker  | 2025-08-30T23:27:27: 2025-08-31T06:27:27.957Z ðŸŸ¢ [SERVER] Starting FMB TimeTracker On-Premises Application...
0|fmb-timetracker  | 2025-08-30T23:27:27: [dotenv@17.2.1] injecting env (26) from fmb-onprem\.env.fmb-onprem -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
0|fmb-timetracker  | 2025-08-30T23:27:27: [dotenv@17.2.1] injecting env (11) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
0|fmb-timetracker  | 2025-08-30T23:27:27: ðŸ¢ FMB On-Premises configuration loaded
0|fmb-timetracker  | 2025-08-30T23:27:27: ðŸ” [FMB-CONFIG] Looking for certificate at: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:27: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:27: ðŸ” [FMB-CONFIG] Certificate length: 1004 characters
0|fmb-timetracker  | 2025-08-30T23:27:27: 2025-08-31T06:27:27.963Z ðŸŸ¢ [FMB-ONPREM] FMB On-premises environment initialized
0|fmb-timetracker  | 2025-08-30T23:27:27: 2025-08-31T06:27:27.963Z ðŸŸ¢ [CONFIG] FMB session secret validated successfully
0|fmb-timetracker  | 2025-08-30T23:27:27: ðŸ”— Connecting to FMB MS SQL database...
0|fmb-timetracker  | 2025-08-30T23:27:28: âœ… FMB Database connection established successfully
0|fmb-timetracker  | 2025-08-30T23:27:28: 2025-08-31T06:27:28.175Z ðŸŸ¢ [DATABASE] FMB Database initialization completed successfully
0|fmb-timetracker  | 2025-08-30T23:27:28: 2025-08-31T06:27:28.178Z ðŸŸ¢ [SESSION] FMB Enterprise Session configured for production mode
0|fmb-timetracker  | 2025-08-30T23:27:28: 2025-08-31T06:27:28.178Z ðŸŸ¢ [SESSION] Initializing MS SQL session store for production
0|fmb-timetracker  | 2025-08-30T23:27:28: 2025-08-31T06:27:28.180Z ðŸŸ¢ [SESSION] Custom MS SQL session store initialized successfully
0|fmb-timetracker  | 2025-08-30T23:27:28: 2025-08-31T06:27:28.180Z ðŸŸ¢ [SESSION] Session store initialization completed
0|fmb-timetracker  | 2025-08-30T23:27:28: 2025-08-31T06:27:28.180Z ðŸŸ¢ [SERVER] FMB Session middleware configured successfully
0|fmb-timetracker  | 2025-08-30T23:27:28: 2025-08-31T06:27:28.182Z ðŸŸ¢ [SECURITY] Enterprise session security middleware activated
0|fmb-timetracker  | 2025-08-30T23:27:28: ðŸš€ Setting up FMB SAML Authentication for On-Premises environment...
0|fmb-timetracker  | 2025-08-30T23:27:28: 2025-08-31T06:27:28.184Z ðŸ”µ [FMB-SAML] Initializing FMB SAML Authentication
0|fmb-timetracker  | 2025-08-30T23:27:28: ðŸ”§ [FMB-DATABASE] Creating new FMB storage instance...
0|fmb-timetracker  | 2025-08-30T23:27:28: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
0|fmb-timetracker  | 2025-08-30T23:27:28: [dotenv@17.2.1] injecting env (0) from .env -- tip: ðŸ“¡ version env with Radar: https://dotenvx.com/radar
0|fmb-timetracker  | 2025-08-30T23:27:28: ðŸ¢ FMB On-Premises configuration loaded
0|fmb-timetracker  | 2025-08-30T23:27:28: ðŸ” [FMB-CONFIG] Looking for certificate at: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:28: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:28: ðŸ” [FMB-CONFIG] Certificate length: 1004 characters
0|fmb-timetracker  | 2025-08-30T23:27:28: ðŸ”— [FMB-STORAGE] Connecting to FMB MS SQL Server...
0|fmb-timetracker  | 2025-08-30T23:27:28: 2025-08-31T06:27:28.187Z ðŸŸ¢ [FMB-SAML] SAML Certificate validation {
0|fmb-timetracker  | 2025-08-30T23:27:28:   "certLength": 1004,
0|fmb-timetracker  | 2025-08-30T23:27:28:   "hasBeginMarker": true,
0|fmb-timetracker  | 2025-08-30T23:27:28:   "hasEndMarker": true
0|fmb-timetracker  | 2025-08-30T23:27:28: }
0|fmb-timetracker  | 2025-08-30T23:27:28: 2025-08-31T06:27:28.188Z ðŸ”´ [SERVER] Critical server startup failure: {
0|fmb-timetracker  | 2025-08-30T23:27:28:   "message": "validateInResponseTo must be one of ['never', 'ifPresent', 'always']",
0|fmb-timetracker  | 2025-08-30T23:27:28:   "name": "TypeError",
0|fmb-timetracker  | 2025-08-30T23:27:28:   "code": "NO_CODE",
0|fmb-timetracker  | 2025-08-30T23:27:28:   "stack": "TypeError: validateInResponseTo must be one of ['never', 'ifPresent', 'always']\n    at SAML.initialize (C:\\fmb-timetracker\\node_modules\\@node-saml\
\node-saml\\lib\\saml.js:103:19)\n    at new SAML (C:\\fmb-timetracker\\node_modules\\@node-saml\\node-saml\\lib\\saml.js:43:29)\n    at new AbstractStrategy (C:\\fmb-timetracker\\node_modules\\@node-saml\
\passport-saml\\lib\\strategy.js:28:26)\n    at new Strategy (C:\\fmb-timetracker\\node_modules\\@node-saml\\passport-saml\\lib\\strategy.js:215:1)\n    at setupFmbSamlAuth (file:///C:/fmb-timetracker/dist
/index.js:1291:24)\n    at registerRoutes (file:///C:/fmb-timetracker/dist/index.js:2771:9)\n    at async createServer2 (file:///C:/fmb-timetracker/dist/index.js:4024:3)",
0|fmb-timetracker  | 2025-08-30T23:27:28:   "errorType": "object",
0|fmb-timetracker  | 2025-08-30T23:27:28:   "errorConstructor": "TypeError",
0|fmb-timetracker  | 2025-08-30T23:27:28:   "serializedError": "{\"stack\":\"TypeError: validateInResponseTo must be one of ['never', 'ifPresent', 'always']\\n    at SAML.initialize (C:\\\\fmb-timetracker\
\\\node_modules\\\\@node-saml\\\\node-saml\\\\lib\\\\saml.js:103:19)\\n    at new SAML (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\node-saml\\\\lib\\\\saml.js:43:29)\\n    at new AbstractStrate
gy (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\passport-saml\\\\lib\\\\strategy.js:28:26)\\n    at new Strategy (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\passport-saml\\\\lib\\\\s
trategy.js:215:1)\\n    at setupFmbSamlAuth (file:///C:/fmb-timetracker/dist/index.js:1291:24)\\n    at registerRoutes (file:///C:/fmb-timetracker/dist/index.js:2771:9)\\n    at async createServer2 (file:/
//C:/fmb-timetracker/dist/index.js:4024:3)\",\"message\":\"validateInResponseTo must be one of ['never', 'ifPresent', 'always']\"}"
0|fmb-timetracker  | 2025-08-30T23:27:28: }
0|fmb-timetracker  | 2025-08-30T23:27:28: 2025-08-31T06:27:28.286Z ðŸ—„ï¸ [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
0|fmb-timetracker  | 2025-08-30T23:27:28: ðŸŸ¢ [FMB-SESSION] Session table structure verified
0|fmb-timetracker  | 2025-08-30T23:27:28: 2025-08-31T06:27:28.689Z ðŸ”´ [SERVER] Exiting due to startup failure
0|fmb-timetracker  | 2025-08-30T23:27:28: ðŸŸ¡ [FMB-SESSION] Initiating graceful shutdown...
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.208Z ðŸŸ¢ [SERVER] Starting FMB TimeTracker On-Premises Application...
0|fmb-timetracker  | 2025-08-30T23:27:33: [dotenv@17.2.1] injecting env (26) from fmb-onprem\.env.fmb-onprem -- tip: âš™ï¸  suppress all logs with { quiet: true }
0|fmb-timetracker  | 2025-08-30T23:27:33: [dotenv@17.2.1] injecting env (11) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
0|fmb-timetracker  | 2025-08-30T23:27:33: ðŸ¢ FMB On-Premises configuration loaded
0|fmb-timetracker  | 2025-08-30T23:27:33: ðŸ” [FMB-CONFIG] Looking for certificate at: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:33: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:33: ðŸ” [FMB-CONFIG] Certificate length: 1004 characters
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.215Z ðŸŸ¢ [FMB-ONPREM] FMB On-premises environment initialized
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.215Z ðŸŸ¢ [CONFIG] FMB session secret validated successfully
0|fmb-timetracker  | 2025-08-30T23:27:33: ðŸ”— Connecting to FMB MS SQL database...
0|fmb-timetracker  | 2025-08-30T23:27:33: âœ… FMB Database connection established successfully
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.426Z ðŸŸ¢ [DATABASE] FMB Database initialization completed successfully
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.429Z ðŸŸ¢ [SESSION] FMB Enterprise Session configured for production mode
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.430Z ðŸŸ¢ [SESSION] Initializing MS SQL session store for production
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.431Z ðŸŸ¢ [SESSION] Custom MS SQL session store initialized successfully
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.431Z ðŸŸ¢ [SESSION] Session store initialization completed
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.431Z ðŸŸ¢ [SERVER] FMB Session middleware configured successfully
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.433Z ðŸŸ¢ [SECURITY] Enterprise session security middleware activated
0|fmb-timetracker  | 2025-08-30T23:27:33: ðŸš€ Setting up FMB SAML Authentication for On-Premises environment...
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.436Z ðŸ”µ [FMB-SAML] Initializing FMB SAML Authentication
0|fmb-timetracker  | 2025-08-30T23:27:33: ðŸ”§ [FMB-DATABASE] Creating new FMB storage instance...
0|fmb-timetracker  | 2025-08-30T23:27:33: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: âš™ï¸  override existing env vars with { override: true }
0|fmb-timetracker  | 2025-08-30T23:27:33: [dotenv@17.2.1] injecting env (0) from .env -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com
0|fmb-timetracker  | 2025-08-30T23:27:33: ðŸ¢ FMB On-Premises configuration loaded
0|fmb-timetracker  | 2025-08-30T23:27:33: ðŸ” [FMB-CONFIG] Looking for certificate at: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:33: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:33: ðŸ” [FMB-CONFIG] Certificate length: 1004 characters
0|fmb-timetracker  | 2025-08-30T23:27:33: ðŸ”— [FMB-STORAGE] Connecting to FMB MS SQL Server...
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.438Z ðŸŸ¢ [FMB-SAML] SAML Certificate validation {
0|fmb-timetracker  | 2025-08-30T23:27:33:   "certLength": 1004,
0|fmb-timetracker  | 2025-08-30T23:27:33:   "hasBeginMarker": true,
0|fmb-timetracker  | 2025-08-30T23:27:33:   "hasEndMarker": true
0|fmb-timetracker  | 2025-08-30T23:27:33: }
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.440Z ðŸ”´ [SERVER] Critical server startup failure: {
0|fmb-timetracker  | 2025-08-30T23:27:33:   "message": "validateInResponseTo must be one of ['never', 'ifPresent', 'always']",
0|fmb-timetracker  | 2025-08-30T23:27:33:   "name": "TypeError",
0|fmb-timetracker  | 2025-08-30T23:27:33:   "code": "NO_CODE",
0|fmb-timetracker  | 2025-08-30T23:27:33:   "stack": "TypeError: validateInResponseTo must be one of ['never', 'ifPresent', 'always']\n    at SAML.initialize (C:\\fmb-timetracker\\node_modules\\@node-saml\
\node-saml\\lib\\saml.js:103:19)\n    at new SAML (C:\\fmb-timetracker\\node_modules\\@node-saml\\node-saml\\lib\\saml.js:43:29)\n    at new AbstractStrategy (C:\\fmb-timetracker\\node_modules\\@node-saml\
\passport-saml\\lib\\strategy.js:28:26)\n    at new Strategy (C:\\fmb-timetracker\\node_modules\\@node-saml\\passport-saml\\lib\\strategy.js:215:1)\n    at setupFmbSamlAuth (file:///C:/fmb-timetracker/dist
/index.js:1291:24)\n    at registerRoutes (file:///C:/fmb-timetracker/dist/index.js:2771:9)\n    at async createServer2 (file:///C:/fmb-timetracker/dist/index.js:4024:3)",
0|fmb-timetracker  | 2025-08-30T23:27:33:   "errorType": "object",
0|fmb-timetracker  | 2025-08-30T23:27:33:   "errorConstructor": "TypeError",
0|fmb-timetracker  | 2025-08-30T23:27:33:   "serializedError": "{\"stack\":\"TypeError: validateInResponseTo must be one of ['never', 'ifPresent', 'always']\\n    at SAML.initialize (C:\\\\fmb-timetracker\
\\\node_modules\\\\@node-saml\\\\node-saml\\\\lib\\\\saml.js:103:19)\\n    at new SAML (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\node-saml\\\\lib\\\\saml.js:43:29)\\n    at new AbstractStrate
gy (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\passport-saml\\\\lib\\\\strategy.js:28:26)\\n    at new Strategy (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\passport-saml\\\\lib\\\\s
trategy.js:215:1)\\n    at setupFmbSamlAuth (file:///C:/fmb-timetracker/dist/index.js:1291:24)\\n    at registerRoutes (file:///C:/fmb-timetracker/dist/index.js:2771:9)\\n    at async createServer2 (file:/
//C:/fmb-timetracker/dist/index.js:4024:3)\",\"message\":\"validateInResponseTo must be one of ['never', 'ifPresent', 'always']\"}"
0|fmb-timetracker  | 2025-08-30T23:27:33: }
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.548Z ðŸ—„ï¸ [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
0|fmb-timetracker  | 2025-08-30T23:27:33: ðŸŸ¢ [FMB-SESSION] Session table structure verified
0|fmb-timetracker  | 2025-08-30T23:27:33: 2025-08-31T06:27:33.940Z ðŸ”´ [SERVER] Exiting due to startup failure
0|fmb-timetracker  | 2025-08-30T23:27:33: ðŸŸ¡ [FMB-SESSION] Initiating graceful shutdown...
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.338Z ðŸŸ¢ [SERVER] Starting FMB TimeTracker On-Premises Application...
0|fmb-timetracker  | 2025-08-30T23:27:38: [dotenv@17.2.1] injecting env (26) from fmb-onprem\.env.fmb-onprem -- tip: ðŸ“¡ auto-backup env with Radar: https://dotenvx.com/radar
0|fmb-timetracker  | 2025-08-30T23:27:38: [dotenv@17.2.1] injecting env (11) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
0|fmb-timetracker  | 2025-08-30T23:27:38: ðŸ¢ FMB On-Premises configuration loaded
0|fmb-timetracker  | 2025-08-30T23:27:38: ðŸ” [FMB-CONFIG] Looking for certificate at: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:38: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:38: ðŸ” [FMB-CONFIG] Certificate length: 1004 characters
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.345Z ðŸŸ¢ [FMB-ONPREM] FMB On-premises environment initialized
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.345Z ðŸŸ¢ [CONFIG] FMB session secret validated successfully
0|fmb-timetracker  | 2025-08-30T23:27:38: ðŸ”— Connecting to FMB MS SQL database...
0|fmb-timetracker  | 2025-08-30T23:27:38: âœ… FMB Database connection established successfully
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.535Z ðŸŸ¢ [DATABASE] FMB Database initialization completed successfully
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.539Z ðŸŸ¢ [SESSION] FMB Enterprise Session configured for production mode
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.539Z ðŸŸ¢ [SESSION] Initializing MS SQL session store for production
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.541Z ðŸŸ¢ [SESSION] Custom MS SQL session store initialized successfully
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.541Z ðŸŸ¢ [SESSION] Session store initialization completed
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.541Z ðŸŸ¢ [SERVER] FMB Session middleware configured successfully
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.543Z ðŸŸ¢ [SECURITY] Enterprise session security middleware activated
0|fmb-timetracker  | 2025-08-30T23:27:38: ðŸš€ Setting up FMB SAML Authentication for On-Premises environment...
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.546Z ðŸ”µ [FMB-SAML] Initializing FMB SAML Authentication
0|fmb-timetracker  | 2025-08-30T23:27:38: ðŸ”§ [FMB-DATABASE] Creating new FMB storage instance...
0|fmb-timetracker  | 2025-08-30T23:27:38: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: ðŸ“¡ auto-backup env with Radar: https://dotenvx.com/radar
0|fmb-timetracker  | 2025-08-30T23:27:38: [dotenv@17.2.1] injecting env (0) from .env -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit
0|fmb-timetracker  | 2025-08-30T23:27:38: ðŸ¢ FMB On-Premises configuration loaded
0|fmb-timetracker  | 2025-08-30T23:27:38: ðŸ” [FMB-CONFIG] Looking for certificate at: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:38: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:/fmb-timetracker/saml_cert.pem
0|fmb-timetracker  | 2025-08-30T23:27:38: ðŸ” [FMB-CONFIG] Certificate length: 1004 characters
0|fmb-timetracker  | 2025-08-30T23:27:38: ðŸ”— [FMB-STORAGE] Connecting to FMB MS SQL Server...
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.548Z ðŸŸ¢ [FMB-SAML] SAML Certificate validation {
0|fmb-timetracker  | 2025-08-30T23:27:38:   "certLength": 1004,
0|fmb-timetracker  | 2025-08-30T23:27:38:   "hasBeginMarker": true,
0|fmb-timetracker  | 2025-08-30T23:27:38:   "hasEndMarker": true
0|fmb-timetracker  | 2025-08-30T23:27:38: }
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.549Z ðŸ”´ [SERVER] Critical server startup failure: {
0|fmb-timetracker  | 2025-08-30T23:27:38:   "message": "validateInResponseTo must be one of ['never', 'ifPresent', 'always']",
0|fmb-timetracker  | 2025-08-30T23:27:38:   "name": "TypeError",
0|fmb-timetracker  | 2025-08-30T23:27:38:   "code": "NO_CODE",
0|fmb-timetracker  | 2025-08-30T23:27:38:   "stack": "TypeError: validateInResponseTo must be one of ['never', 'ifPresent', 'always']\n    at SAML.initialize (C:\\fmb-timetracker\\node_modules\\@node-saml\
\node-saml\\lib\\saml.js:103:19)\n    at new SAML (C:\\fmb-timetracker\\node_modules\\@node-saml\\node-saml\\lib\\saml.js:43:29)\n    at new AbstractStrategy (C:\\fmb-timetracker\\node_modules\\@node-saml\
\passport-saml\\lib\\strategy.js:28:26)\n    at new Strategy (C:\\fmb-timetracker\\node_modules\\@node-saml\\passport-saml\\lib\\strategy.js:215:1)\n    at setupFmbSamlAuth (file:///C:/fmb-timetracker/dist
/index.js:1291:24)\n    at registerRoutes (file:///C:/fmb-timetracker/dist/index.js:2771:9)\n    at async createServer2 (file:///C:/fmb-timetracker/dist/index.js:4024:3)",
0|fmb-timetracker  | 2025-08-30T23:27:38:   "errorType": "object",
0|fmb-timetracker  | 2025-08-30T23:27:38:   "errorConstructor": "TypeError",
0|fmb-timetracker  | 2025-08-30T23:27:38:   "serializedError": "{\"stack\":\"TypeError: validateInResponseTo must be one of ['never', 'ifPresent', 'always']\\n    at SAML.initialize (C:\\\\fmb-timetracker\
\\\node_modules\\\\@node-saml\\\\node-saml\\\\lib\\\\saml.js:103:19)\\n    at new SAML (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\node-saml\\\\lib\\\\saml.js:43:29)\\n    at new AbstractStrate
gy (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\passport-saml\\\\lib\\\\strategy.js:28:26)\\n    at new Strategy (C:\\\\fmb-timetracker\\\\node_modules\\\\@node-saml\\\\passport-saml\\\\lib\\\\s
trategy.js:215:1)\\n    at setupFmbSamlAuth (file:///C:/fmb-timetracker/dist/index.js:1291:24)\\n    at registerRoutes (file:///C:/fmb-timetracker/dist/index.js:2771:9)\\n    at async createServer2 (file:/
//C:/fmb-timetracker/dist/index.js:4024:3)\",\"message\":\"validateInResponseTo must be one of ['never', 'ifPresent', 'always']\"}"
0|fmb-timetracker  | 2025-08-30T23:27:38: }
0|fmb-timetracker  | 2025-08-30T23:27:38: 2025-08-31T06:27:38.664Z ðŸ—„ï¸ [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
0|fmb-timetracker  | 2025-08-30T23:27:38: ðŸŸ¢ [FMB-SESSION] Session table structure verified
0|fmb-timetracker  | 2025-08-30T23:27:39: 2025-08-31T06:27:39.050Z ðŸ”´ [SERVER] Exiting due to startup failure
0|fmb-timetracker  | 2025-08-30T23:27:39: ðŸŸ¡ [FMB-SESSION] Initiating graceful shutdown...
