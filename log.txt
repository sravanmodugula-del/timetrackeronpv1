2025-08-30T21:51:55: 2025-08-31T04:51:55.528Z üü¢ [SERVER] Starting FMB TimeTracker On-Premises Application...
2025-08-30T21:51:55: [dotenv@17.2.1] injecting env (22) from fmb-onprem\.env.fmb-onprem -- tip: üì° observe env with Radar: https://dotenvx.com/radar
2025-08-30T21:51:55: [dotenv@17.2.1] injecting env (11) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
2025-08-30T21:51:55: üè¢ FMB On-Premises configuration loaded
2025-08-30T21:51:55: üîç [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-08-30T21:51:55: ‚úÖ [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-08-30T21:51:55: 2025-08-31T04:51:55.534Z üü¢ [FMB-ONPREM] FMB On-premises environment initialized
2025-08-30T21:51:55: 2025-08-31T04:51:55.534Z üü¢ [CONFIG] FMB session secret validated successfully
2025-08-30T21:51:55: üîó Connecting to FMB MS SQL database...
2025-08-30T21:51:55: ‚úÖ FMB Database connection established successfully
2025-08-30T21:51:55: 2025-08-31T04:51:55.737Z üü¢ [DATABASE] FMB Database initialization completed successfully
2025-08-30T21:51:55: 2025-08-31T04:51:55.741Z üü¢ [SESSION] FMB Enterprise Session configured for production mode
2025-08-30T21:51:55: 2025-08-31T04:51:55.742Z üü¢ [SESSION] Initializing MS SQL session store for production
2025-08-30T21:51:55: 2025-08-31T04:51:55.743Z üü¢ [SESSION] Custom MS SQL session store initialized successfully
2025-08-30T21:51:55: 2025-08-31T04:51:55.743Z üü¢ [SESSION] Session store initialization completed
2025-08-30T21:51:55: 2025-08-31T04:51:55.743Z üü¢ [SERVER] FMB Session middleware configured successfully
2025-08-30T21:51:55: 2025-08-31T04:51:55.746Z üü¢ [SECURITY] Enterprise session security middleware activated
2025-08-30T21:51:55: üöÄ Setting up FMB SAML Authentication for On-Premises environment...
2025-08-30T21:51:55: 2025-08-31T04:51:55.749Z üîµ [FMB-SAML] Initializing FMB SAML Authentication
2025-08-30T21:51:55: üîß [FMB-DATABASE] Creating new FMB storage instance...
2025-08-30T21:51:55: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
2025-08-30T21:51:55: [dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
2025-08-30T21:51:55: üè¢ FMB On-Premises configuration loaded
2025-08-30T21:51:55: üîç [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-08-30T21:51:55: ‚úÖ [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-08-30T21:51:55: üîó [FMB-STORAGE] Connecting to FMB MS SQL Server...
2025-08-30T21:51:55: 2025-08-31T04:51:55.753Z üîµ [FMB-SAML] FMB SAML Authentication setup completed
2025-08-30T21:51:55: üõ°Ô∏è [SESSION-MGMT] Enterprise session management routes registered
2025-08-30T21:51:55: üõ°Ô∏è [SESSION-MGMT] Enterprise session management routes registered
2025-08-30T21:51:55: 2025-08-31T04:51:55.758Z üü¢ [SERVER] FMB TimeTracker running on http://0.0.0.0:3000
2025-08-30T21:51:55: 2025-08-31T04:51:55.758Z üü¢ [SERVER] Environment: fmb-onprem
2025-08-30T21:51:55: 2025-08-31T04:51:55.758Z üü¢ [FMB-ONPREM] On-premises deployment active - SAML authentication enabled
2025-08-30T21:51:55: 2025-08-31T04:51:55.867Z üóÑÔ∏è [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
2025-08-30T21:51:56: üü¢ [FMB-SESSION] Session table structure verified
2025-08-30T21:53:20: 2025-08-31T04:53:20.675Z üü¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-08-30T21:53:20:   "ip": "127.0.0.1",
2025-08-30T21:53:20:   "sessionId": "1ccd923cbf874e726aae474385fdb4a84270153fb7a455b6b886983d3712faa9",
2025-08-30T21:53:20:   "isAuthenticated": false
2025-08-30T21:53:20: }
2025-08-30T21:53:20: 2025-08-31T04:53:20.675Z üü° [FMB-SAML] Unauthorized access attempt {
2025-08-30T21:53:20:   "path": "/api/auth/user",
2025-08-30T21:53:20:   "method": "GET",
2025-08-30T21:53:20:   "ip": "127.0.0.1",
2025-08-30T21:53:20:   "sessionId": "1ccd923cbf874e726aae474385fdb4a84270153fb7a455b6b886983d3712faa9"
2025-08-30T21:53:20: }
2025-08-30T21:53:20: 2025-08-31T04:53:20.693Z üî¥ [FRONTEND-API] HTTP 401 error on http://localhost:3000/api/auth/user {
2025-08-30T21:53:20:   data: {
2025-08-30T21:53:20:     status: 401,
2025-08-30T21:53:20:     statusText: 'Unauthorized',
2025-08-30T21:53:20:     responseText: '{"message":"Unauthorized - Please log in via SAML"}',
2025-08-30T21:53:20:     url: 'http://localhost:3000/api/auth/user'
2025-08-30T21:53:20:   },
2025-08-30T21:53:20:   url: 'http://localhost:3000/',
2025-08-30T21:53:20:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0',
2025-08-30T21:53:20:   ip: '127.0.0.1',
2025-08-30T21:53:20:   sessionId: 'f4759e8fdaea2f1f89ab27c689e63d2c653449cf9c4ccb5a0c3c6d2be8434796'
2025-08-30T21:53:20: }
2025-08-30T21:53:24: 2025-08-31T04:53:24.634Z üü¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-08-30T21:53:24:   "ip": "10.0.123.65:57832",
2025-08-30T21:53:24:   "sessionId": "4a5b6548d6259f4f832443f112ad92517edd69f57674f77d5f227ab208bd229d",
2025-08-30T21:53:24:   "isAuthenticated": false
2025-08-30T21:53:24: }
2025-08-30T21:53:24: 2025-08-31T04:53:24.635Z üü° [FMB-SAML] Unauthorized access attempt {
2025-08-30T21:53:24:   "path": "/api/auth/user",
2025-08-30T21:53:24:   "method": "GET",
2025-08-30T21:53:24:   "ip": "10.0.123.65:57832",
2025-08-30T21:53:24:   "sessionId": "4a5b6548d6259f4f832443f112ad92517edd69f57674f77d5f227ab208bd229d"
2025-08-30T21:53:24: }
2025-08-30T21:53:24: 2025-08-31T04:53:24.662Z üî¥ [FRONTEND-API] HTTP 401 error on https://timetracker.fmb.com/api/auth/user {
2025-08-30T21:53:24:   data: {
2025-08-30T21:53:24:     status: 401,
2025-08-30T21:53:24:     statusText: '',
2025-08-30T21:53:24:     responseText: '{"message":"Unauthorized - Please log in via SAML"}',
2025-08-30T21:53:24:     url: 'https://timetracker.fmb.com/api/auth/user'
2025-08-30T21:53:24:   },
2025-08-30T21:53:24:   url: 'https://timetracker.fmb.com/IdPServlet?idp_id=a0tt0vrnu3tt&SAMLRequest=nZLNbtswEIRfheDdEm1Hrk1YNpQYRQWkrRA7PeQS0OSqIcoflbty07cvLNeJe0gOvZKDb2Znd7l%2B9o4dIKGNoeTjTPD1aonKu05WPT2FO%2FjZAxJ79i6gHD5K3qcgo0KLMigPKEnLbfX5Vk4yIbsUKeroOKs3JX%2BcXc20affjop3pD4u5afdXBWffzoaTTHBWI%2FZQByQVqOQTMSlGYj6aip1YSLGQ0yIrFvMHzpq%2F6GsbjA3f38%2BxP4lQftrtmlHzdbvjbANINigarJ%2BIOpR53sVEymWt32c6%2Brw2zRbSwQGtrekerSmVIBKHFPopEWcVIqQj4SYG7D2ko9pquL%2B7fWWS9UBJ6R%2BQXsDH7nKlkZ%2F6lcPU6aLY9%2BdRZ1%2B%2Bugy0zC9g5819UR7qTROd1b%2F%2FZ3MfY%2FKK3laPs%2FHwYs2oHaQSvLKuMiYBImeVc%2FHXTQJFUHJKPfB8dQr671Wt%2FgA%3D',
2025-08-30T21:53:24:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0',
2025-08-30T21:53:24:   ip: '10.0.123.65:57832',
2025-08-30T21:53:24:   sessionId: '5b0fef9f279e6a62f2c6fbd141bf72d997f9ea3d7177e9c5d903204fad203c06'
2025-08-30T21:53:24: }
2025-08-30T21:53:28: 2025-08-31T04:53:28.282Z üü¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-08-30T21:53:28:   "ip": "[::1]:57838",
2025-08-30T21:53:28:   "sessionId": "90938cb266c1140c24ebb217683200c9d5eae5d08aeba94789261bde78d169a0",
2025-08-30T21:53:28:   "isAuthenticated": false
2025-08-30T21:53:28: }
2025-08-30T21:53:28: 2025-08-31T04:53:28.282Z üü° [FMB-SAML] Unauthorized access attempt {
2025-08-30T21:53:28:   "path": "/api/auth/user",
2025-08-30T21:53:28:   "method": "GET",
2025-08-30T21:53:28:   "ip": "[::1]:57838",
2025-08-30T21:53:28:   "sessionId": "90938cb266c1140c24ebb217683200c9d5eae5d08aeba94789261bde78d169a0"
2025-08-30T21:53:28: }
2025-08-30T21:53:28: 2025-08-31T04:53:28.301Z üî¥ [FRONTEND-API] HTTP 401 error on http://localhost/api/auth/user {
2025-08-30T21:53:28:   data: {
2025-08-30T21:53:28:     status: 401,
2025-08-30T21:53:28:     statusText: 'Unauthorized',
2025-08-30T21:53:28:     responseText: '{"message":"Unauthorized - Please log in via SAML"}',
2025-08-30T21:53:28:     url: 'http://localhost/api/auth/user'
2025-08-30T21:53:28:   },
2025-08-30T21:53:28:   url: 'http://localhost/',
2025-08-30T21:53:28:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0',
2025-08-30T21:53:28:   ip: '[::1]:57838',
2025-08-30T21:53:28:   sessionId: '0e082e1db7861e4b1dad1b5d8464fd54635482f95cf2f89ef1c19ba712cabef8'
2025-08-30T21:53:28: }
2025-08-30T21:53:31: Database health check failed: TypeError: storage2.pingDatabase is not a function
2025-08-30T21:53:31:     at checkDatabaseHealth2 (file:///C:/fmb-timetracker/dist/index.js:2694:20)
2025-08-30T21:53:31:     at file:///C:/fmb-timetracker/dist/index.js:3631:31
2025-08-30T21:53:31:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:31:     at next (C:\fmb-timetracker\node_modules\express\lib\router\route.js:149:13)
2025-08-30T21:53:31:     at Route.dispatch (C:\fmb-timetracker\node_modules\express\lib\router\route.js:119:3)
2025-08-30T21:53:31:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:31:     at C:\fmb-timetracker\node_modules\express\lib\router\index.js:284:15
2025-08-30T21:53:31:     at Function.process_params (C:\fmb-timetracker\node_modules\express\lib\router\index.js:346:12)
2025-08-30T21:53:31:     at next (C:\fmb-timetracker\node_modules\express\lib\router\index.js:280:10)
2025-08-30T21:53:31:     at strategy.pass (C:\fmb-timetracker\node_modules\passport\lib\middleware\authenticate.js:355:9)
2025-08-30T21:53:41: Database health check failed: TypeError: storage2.pingDatabase is not a function
2025-08-30T21:53:41:     at checkDatabaseHealth2 (file:///C:/fmb-timetracker/dist/index.js:2694:20)
2025-08-30T21:53:41:     at file:///C:/fmb-timetracker/dist/index.js:3631:31
2025-08-30T21:53:41:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:41:     at next (C:\fmb-timetracker\node_modules\express\lib\router\route.js:149:13)
2025-08-30T21:53:41:     at Route.dispatch (C:\fmb-timetracker\node_modules\express\lib\router\route.js:119:3)
2025-08-30T21:53:41:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:41:     at C:\fmb-timetracker\node_modules\express\lib\router\index.js:284:15
2025-08-30T21:53:41:     at Function.process_params (C:\fmb-timetracker\node_modules\express\lib\router\index.js:346:12)
2025-08-30T21:53:41:     at next (C:\fmb-timetracker\node_modules\express\lib\router\index.js:280:10)
2025-08-30T21:53:41:     at strategy.pass (C:\fmb-timetracker\node_modules\passport\lib\middleware\authenticate.js:355:9)
2025-08-30T21:53:42: Database health check failed: TypeError: storage2.pingDatabase is not a function
2025-08-30T21:53:42:     at checkDatabaseHealth2 (file:///C:/fmb-timetracker/dist/index.js:2694:20)
2025-08-30T21:53:42:     at file:///C:/fmb-timetracker/dist/index.js:3631:31
2025-08-30T21:53:42:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:42:     at next (C:\fmb-timetracker\node_modules\express\lib\router\route.js:149:13)
2025-08-30T21:53:42:     at Route.dispatch (C:\fmb-timetracker\node_modules\express\lib\router\route.js:119:3)
2025-08-30T21:53:42:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:42:     at C:\fmb-timetracker\node_modules\express\lib\router\index.js:284:15
2025-08-30T21:53:42:     at Function.process_params (C:\fmb-timetracker\node_modules\express\lib\router\index.js:346:12)
2025-08-30T21:53:42:     at next (C:\fmb-timetracker\node_modules\express\lib\router\index.js:280:10)
2025-08-30T21:53:42:     at strategy.pass (C:\fmb-timetracker\node_modules\passport\lib\middleware\authenticate.js:355:9)
2025-08-30T21:53:43: Database health check failed: TypeError: storage2.pingDatabase is not a function
2025-08-30T21:53:43:     at checkDatabaseHealth2 (file:///C:/fmb-timetracker/dist/index.js:2694:20)
2025-08-30T21:53:43:     at file:///C:/fmb-timetracker/dist/index.js:3631:31
2025-08-30T21:53:43:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:43:     at next (C:\fmb-timetracker\node_modules\express\lib\router\route.js:149:13)
2025-08-30T21:53:43:     at Route.dispatch (C:\fmb-timetracker\node_modules\express\lib\router\route.js:119:3)
2025-08-30T21:53:43:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:43:     at C:\fmb-timetracker\node_modules\express\lib\router\index.js:284:15
2025-08-30T21:53:43:     at Function.process_params (C:\fmb-timetracker\node_modules\express\lib\router\index.js:346:12)
2025-08-30T21:53:43:     at next (C:\fmb-timetracker\node_modules\express\lib\router\index.js:280:10)
2025-08-30T21:53:43:     at strategy.pass (C:\fmb-timetracker\node_modules\passport\lib\middleware\authenticate.js:355:9)
2025-08-30T21:53:43: Database health check failed: TypeError: storage2.pingDatabase is not a function
2025-08-30T21:53:43:     at checkDatabaseHealth2 (file:///C:/fmb-timetracker/dist/index.js:2694:20)
2025-08-30T21:53:43:     at file:///C:/fmb-timetracker/dist/index.js:3631:31
2025-08-30T21:53:43:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:43:     at next (C:\fmb-timetracker\node_modules\express\lib\router\route.js:149:13)
2025-08-30T21:53:43:     at Route.dispatch (C:\fmb-timetracker\node_modules\express\lib\router\route.js:119:3)
2025-08-30T21:53:43:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:43:     at C:\fmb-timetracker\node_modules\express\lib\router\index.js:284:15
2025-08-30T21:53:43:     at Function.process_params (C:\fmb-timetracker\node_modules\express\lib\router\index.js:346:12)
2025-08-30T21:53:43:     at next (C:\fmb-timetracker\node_modules\express\lib\router\index.js:280:10)
2025-08-30T21:53:43:     at strategy.pass (C:\fmb-timetracker\node_modules\passport\lib\middleware\authenticate.js:355:9)
2025-08-30T21:53:43: Database health check failed: TypeError: storage2.pingDatabase is not a function
2025-08-30T21:53:43:     at checkDatabaseHealth2 (file:///C:/fmb-timetracker/dist/index.js:2694:20)
2025-08-30T21:53:43:     at file:///C:/fmb-timetracker/dist/index.js:3631:31
2025-08-30T21:53:43:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:43:     at next (C:\fmb-timetracker\node_modules\express\lib\router\route.js:149:13)
2025-08-30T21:53:43:     at Route.dispatch (C:\fmb-timetracker\node_modules\express\lib\router\route.js:119:3)
2025-08-30T21:53:43:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:43:     at C:\fmb-timetracker\node_modules\express\lib\router\index.js:284:15
2025-08-30T21:53:43:     at Function.process_params (C:\fmb-timetracker\node_modules\express\lib\router\index.js:346:12)
2025-08-30T21:53:43:     at next (C:\fmb-timetracker\node_modules\express\lib\router\index.js:280:10)
2025-08-30T21:53:43:     at strategy.pass (C:\fmb-timetracker\node_modules\passport\lib\middleware\authenticate.js:355:9)
2025-08-30T21:53:44: Database health check failed: TypeError: storage2.pingDatabase is not a function
2025-08-30T21:53:44:     at checkDatabaseHealth2 (file:///C:/fmb-timetracker/dist/index.js:2694:20)
2025-08-30T21:53:44:     at file:///C:/fmb-timetracker/dist/index.js:3631:31
2025-08-30T21:53:44:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:44:     at next (C:\fmb-timetracker\node_modules\express\lib\router\route.js:149:13)
2025-08-30T21:53:44:     at Route.dispatch (C:\fmb-timetracker\node_modules\express\lib\router\route.js:119:3)
2025-08-30T21:53:44:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:44:     at C:\fmb-timetracker\node_modules\express\lib\router\index.js:284:15
2025-08-30T21:53:44:     at Function.process_params (C:\fmb-timetracker\node_modules\express\lib\router\index.js:346:12)
2025-08-30T21:53:44:     at next (C:\fmb-timetracker\node_modules\express\lib\router\index.js:280:10)
2025-08-30T21:53:44:     at strategy.pass (C:\fmb-timetracker\node_modules\passport\lib\middleware\authenticate.js:355:9)
2025-08-30T21:53:44: Database health check failed: TypeError: storage2.pingDatabase is not a function
2025-08-30T21:53:44:     at checkDatabaseHealth2 (file:///C:/fmb-timetracker/dist/index.js:2694:20)
2025-08-30T21:53:44:     at file:///C:/fmb-timetracker/dist/index.js:3631:31
2025-08-30T21:53:44:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:44:     at next (C:\fmb-timetracker\node_modules\express\lib\router\route.js:149:13)
2025-08-30T21:53:44:     at Route.dispatch (C:\fmb-timetracker\node_modules\express\lib\router\route.js:119:3)
2025-08-30T21:53:44:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
2025-08-30T21:53:44:     at C:\fmb-timetracker\node_modules\express\lib\router\index.js:284:15
2025-08-30T21:53:44:     at Function.process_params (C:\fmb-timetracker\node_modules\express\lib\router\index.js:346:12)
2025-08-30T21:53:44:     at next (C:\fmb-timetracker\node_modules\express\lib\router\index.js:280:10)
2025-08-30T21:53:44:     at strategy.pass (C:\fmb-timetracker\node_modules\passport\lib\middleware\authenticate.js:355:9)
2025-08-30T21:55:03: 2025-08-31T04:55:03.008Z üîµ [FMB-SAML] SAML ACS callback received {
2025-08-30T21:55:03:   "ip": "192.168.210.12:56539",
2025-08-30T21:55:03:   "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
2025-08-30T21:55:03:   "timestamp": "2025-08-31T04:55:03.008Z"
2025-08-30T21:55:03: }
2025-08-30T21:55:03: 2025-08-31T04:55:03.025Z üî¥ [FMB-SAML] SAML authentication error {
2025-08-30T21:55:03:   "error": "Invalid document signature"
2025-08-30T21:55:03: }
2025-08-30T21:55:03: 2025-08-31T04:55:03.110Z üî¥ [FMB-SAML] SAML login error page accessed
2025-08-30T21:55:09: 2025-08-31T04:55:09.174Z üîµ [FMB-SAML] SAML login initiated {
2025-08-30T21:55:09:   "ip": "192.168.210.12:56539",
2025-08-30T21:55:09:   "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0"
2025-08-30T21:55:09: }
2025-08-30T21:55:09: 2025-08-31T04:55:09.677Z üü¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-08-30T21:55:09:   "ip": "192.168.210.12:56539",
2025-08-30T21:55:09:   "sessionId": "974ade9ca9ba22b8d8e0d23e300e0c7454a3bd9d9b92ddac1df8d33702e642ea",
2025-08-30T21:55:09:   "isAuthenticated": false
2025-08-30T21:55:09: }
2025-08-30T21:55:09: 2025-08-31T04:55:09.678Z üü° [FMB-SAML] Unauthorized access attempt {
2025-08-30T21:55:09:   "path": "/api/auth/user",
2025-08-30T21:55:09:   "method": "GET",
2025-08-30T21:55:09:   "ip": "192.168.210.12:56539",
2025-08-30T21:55:09:   "sessionId": "974ade9ca9ba22b8d8e0d23e300e0c7454a3bd9d9b92ddac1df8d33702e642ea"
2025-08-30T21:55:09: }
2025-08-30T21:55:09: 2025-08-31T04:55:09.701Z üî¥ [FRONTEND-API] HTTP 401 error on https://timetracker.fmb.com/api/auth/user {
2025-08-30T21:55:09:   data: {
2025-08-30T21:55:09:     status: 401,
2025-08-30T21:55:09:     statusText: '',
2025-08-30T21:55:09:     responseText: '{"message":"Unauthorized - Please log in via SAML"}',
2025-08-30T21:55:09:     url: 'https://timetracker.fmb.com/api/auth/user'
2025-08-30T21:55:09:   },
2025-08-30T21:55:09:   url: 'https://timetracker.fmb.com/IdPServlet?idp_id=a0tt0vrnu3tt&SAMLRequest=nVNNj9owFPwrke8kThYaahEQBVVF2rYR0B56WRn70bXqj9TvhaX%2FvkqALYcuB65%2Bo3nzZsaT2dHZ5AARTfAVy1POZtMJSmcbMW%2Fp2a%2FhdwtIydFZj6IfVKyNXgSJBoWXDlCQEpv550dRpFw0MVBQwbJktazYE5RDqUrFi32p3pVjCcNxqUoFw7HSIHc8L4pipEtgyfeLiCLlLFkhtrDySNJTxQpejAZ8PHjIt3woRiPB36d5OfrBkvq87oPx2vift7XtTiAUn7bbelB%2F3WxZsgQk4yX1q5%2BJGhRZ1oRI0qZ7t0tVcNlK1xuIBws0M7p5MrqSnIgfom8fiFgyR4TYMSyCx9ZB7NBGwbf14z9OMg4oSvUL4itx52cmFbKT56K%2FOl6ZffseednLpteCJtkV2SXNL9LBalkHa9Sfe9KcWxteFhEkQcUotsCSjyE6SW8T5Gnevxg92PdQAU4aO9c6AiLLLtLOHQPdN24RPMHxrsYtgmtkNNhFCUep6OLrNfHCSsQ17O9x%2BSZMCdVRA4paIr6EqLtygiLQ2yg9dqU6R%2FM%2FPdPT7A07XqfXv3L6Fw%3D%3D',
2025-08-30T21:55:09:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0',
2025-08-30T21:55:09:   ip: '192.168.210.12:56539',
2025-08-30T21:55:09:   sessionId: 'b42082e2582e7be1496badc79bce863a7cdcb1f595fc71011fa2240940a4f5be'
2025-08-30T21:55:09: }
2025-08-30T21:55:16: 2025-08-31T04:55:16.520Z üîµ [FMB-SAML] SAML ACS callback received {
2025-08-30T21:55:16:   "ip": "192.168.210.12:56539",
2025-08-30T21:55:16:   "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
2025-08-30T21:55:16:   "timestamp": "2025-08-31T04:55:16.520Z"
2025-08-30T21:55:16: }
2025-08-30T21:55:16: 2025-08-31T04:55:16.523Z üî¥ [FMB-SAML] SAML authentication error {
2025-08-30T21:55:16:   "error": "Invalid document signature"
2025-08-30T21:55:16: }
2025-08-30T21:55:16: 2025-08-31T04:55:16.600Z üî¥ [FMB-SAML] SAML login error page accessed
2025-08-30T22:09:27: 2025-08-31T05:09:27.422Z üü¢ [SERVER] Starting FMB TimeTracker On-Premises Application...
2025-08-30T22:09:27: [dotenv@17.2.1] injecting env (22) from fmb-onprem\.env.fmb-onprem -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
2025-08-30T22:09:27: [dotenv@17.2.1] injecting env (11) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
2025-08-30T22:09:27: üè¢ FMB On-Premises configuration loaded
2025-08-30T22:09:27: üîç [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-08-30T22:09:27: ‚úÖ [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-08-30T22:09:27: 2025-08-31T05:09:27.429Z üü¢ [FMB-ONPREM] FMB On-premises environment initialized
2025-08-30T22:09:27: 2025-08-31T05:09:27.430Z üü¢ [CONFIG] FMB session secret validated successfully
2025-08-30T22:09:27: üîó Connecting to FMB MS SQL database...
2025-08-30T22:09:27: ‚úÖ FMB Database connection established successfully
2025-08-30T22:09:27: 2025-08-31T05:09:27.634Z üü¢ [DATABASE] FMB Database initialization completed successfully
2025-08-30T22:09:27: 2025-08-31T05:09:27.638Z üü¢ [SESSION] FMB Enterprise Session configured for production mode
2025-08-30T22:09:27: 2025-08-31T05:09:27.639Z üü¢ [SESSION] Initializing MS SQL session store for production
2025-08-30T22:09:27: 2025-08-31T05:09:27.640Z üü¢ [SESSION] Custom MS SQL session store initialized successfully
2025-08-30T22:09:27: 2025-08-31T05:09:27.641Z üü¢ [SESSION] Session store initialization completed
2025-08-30T22:09:27: 2025-08-31T05:09:27.641Z üü¢ [SERVER] FMB Session middleware configured successfully
2025-08-30T22:09:27: 2025-08-31T05:09:27.643Z üü¢ [SECURITY] Enterprise session security middleware activated
2025-08-30T22:09:27: üöÄ Setting up FMB SAML Authentication for On-Premises environment...
2025-08-30T22:09:27: 2025-08-31T05:09:27.647Z üîµ [FMB-SAML] Initializing FMB SAML Authentication
2025-08-30T22:09:27: üîß [FMB-DATABASE] Creating new FMB storage instance...
2025-08-30T22:09:27: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: üì° observe env with Radar: https://dotenvx.com/radar
2025-08-30T22:09:27: [dotenv@17.2.1] injecting env (0) from .env -- tip: üì° version env with Radar: https://dotenvx.com/radar
2025-08-30T22:09:27: üè¢ FMB On-Premises configuration loaded
2025-08-30T22:09:27: üîç [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-08-30T22:09:27: ‚úÖ [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-08-30T22:09:27: üîó [FMB-STORAGE] Connecting to FMB MS SQL Server...
2025-08-30T22:09:27: 2025-08-31T05:09:27.651Z üîµ [FMB-SAML] FMB SAML Authentication setup completed
2025-08-30T22:09:27: üõ°Ô∏è [SESSION-MGMT] Enterprise session management routes registered
2025-08-30T22:09:27: üõ°Ô∏è [SESSION-MGMT] Enterprise session management routes registered
2025-08-30T22:09:27: 2025-08-31T05:09:27.655Z üü¢ [SERVER] FMB TimeTracker running on http://0.0.0.0:3000
2025-08-30T22:09:27: 2025-08-31T05:09:27.656Z üü¢ [SERVER] Environment: fmb-onprem
2025-08-30T22:09:27: 2025-08-31T05:09:27.656Z üü¢ [FMB-ONPREM] On-premises deployment active - SAML authentication enabled
2025-08-30T22:09:27: 2025-08-31T05:09:27.757Z üóÑÔ∏è [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
2025-08-30T22:09:27: üü¢ [FMB-SESSION] Session table structure verified
2025-08-30T22:09:56: 2025-08-31T05:09:56.787Z üîµ [FMB-SAML] SAML ACS callback received {
2025-08-30T22:09:56:   "ip": "192.168.210.12:57629",
2025-08-30T22:09:56:   "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
2025-08-30T22:09:56:   "timestamp": "2025-08-31T05:09:56.787Z"
2025-08-30T22:09:56: }
2025-08-30T22:09:56: 2025-08-31T05:09:56.801Z üî¥ [FMB-SAML] SAML authentication error {
2025-08-30T22:09:56:   "error": "Invalid document signature"
2025-08-30T22:09:56: }
2025-08-30T22:09:56: 2025-08-31T05:09:56.904Z üî¥ [FMB-SAML] SAML login error page accessed


PS C:\Users\ADM91381> cd..

PS C:\Users> cd..

PS C:\> cd .\fmb-timetracker

PS C:\fmb-timetracker> # FMB TimeTracker Simple Deployment Script
param(
    [string]$InstallPath = "C:\fmb-timetracker"
)

Write-Host "üöÄ FMB TimeTracker Deployment" -ForegroundColor Green

# Check admin privileges
if (-NOT ([Security.Principal.WindowsPrincipal] [Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole] "Administrator")) {
    Write-Host "‚ùå Run as Administrator" -ForegroundColor Red
    exit 1
}

# Create logs directory
if (-not (Test-Path "$InstallPath\logs")) {
    New-Item -ItemType Directory -Path "$InstallPath\logs" -Force | Out-Null
}

# Check .env file
if (-not (Test-Path ".env")) {
    if (Test-Path "fmb-onprem/.env.fmb-onprem") {
        Copy-Item "fmb-onprem/.env.fmb-onprem" ".env"
        Write-Host "‚úÖ Environment file copied" -ForegroundColor Green
    } else {
        Write-Host "‚ùå No .env file found" -ForegroundColor Red
        exit 1
    }
}

# Stop existing processes
Write-Host "‚èπÔ∏è Stopping application..." -ForegroundColor Yellow
npx pm2 delete fmb-timetracker 2>$null

# Install dependencies
Write-Host "üì¶ Installing dependencies..." -ForegroundColor Yellow
npm install --legacy-peer-deps

# Build application
Write-Host "üî® Building..." -ForegroundColor Yellow
npm run build

if (-not (Test-Path "dist/index.js")) {
    Write-Host "‚ùå Build failed" -ForegroundColor Red
    exit 1
}

# Start application
Write-Host "‚ñ∂Ô∏è Starting application..." -ForegroundColor Yellow
npx pm2 start ecosystem.config.cjs

# Wait and check status
Start-Sleep -Seconds 15
$status = npx pm2 jlist | ConvertFrom-Json
$app = $status | Where-Object { $_.name -eq "fmb-timetracker" }

if ($app -and $app.pm2_env.status -eq "online") {
    Write-Host "‚úÖ Deployment successful!" -ForegroundColor Green
    Write-Host "üåê Check: http://localhost:3000" -ForegroundColor Green
    
    # Health check
    Start-Sleep -Seconds 5
    try {
        $response = Invoke-WebRequest -Uri "http://localhost:3000/health" -UseBasicParsing -TimeoutSec 10
        if ($response.StatusCode -eq 200) {
            Write-Host "‚úÖ Health check passed" -ForegroundColor Green
        }
    } catch {
        Write-Host "‚ö†Ô∏è Health check failed - check logs" -ForegroundColor Yellow
    }
} else {
    Write-Host "‚ùå Deployment failed" -ForegroundColor Red
    npx pm2 logs fmb-timetracker --lines 10
    exit 1
}

Write-Host "üìã Commands: npx pm2 status | npx pm2 logs" -ForegroundColor Cyan
üöÄ FMB TimeTracker Deployment
‚èπÔ∏è Stopping application...
[PM2] Applying action deleteProcessId on app [fmb-timetracker](ids: [ 0 ])
[PM2] [fmb-timetracker](0) √¢≈ì‚Äú
√¢‚Äù≈í√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢
‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬ê
√¢‚Äù‚Äö id √¢‚Äù‚Äö name      √¢‚Äù‚Äö namespace   √¢‚Äù‚Äö version √¢‚Äù‚Äö mode    √¢‚Äù‚Äö pid      √¢‚Äù‚Äö uptime √¢‚Äù‚Äö √¢‚Ä†¬∫    √¢‚Äù‚Äö status    √¢‚Äù‚Äö cpu      √¢‚Äù‚Äö mem      √¢‚Äù‚Äö user     √¢‚Äù‚Äö watching √¢‚Äù‚Äö
√¢‚Äù‚Äù√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢
‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚ÄùÀú
üì¶ Installing dependencies...

up to date, audited 804 packages in 3s

111 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (1 low, 5 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
üî® Building...

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

[36mvite v7.1.3 [32mbuilding for production...[36m[39m
transforming...
[32m√¢≈ì‚Äú[39m 2077 modules transformed.
rendering chunks...
computing gzip size...
[2m../dist/public/[22m[32mindex.html                 [39m[1m[2m  0.86 kB[22m[1m[22m[2m √¢‚Äù‚Äö gzip:   0.44 kB[22m
[2m../dist/public/[22m[35massets/index-81F4Kgy-.css  [39m[1m[2m 70.03 kB[22m[1m[22m[2m √¢‚Äù‚Äö gzip:  12.48 kB[22m
[2m../dist/public/[22m[36massets/index-DcguImM-.js   [39m[1m[33m635.18 kB[39m[22m[2m √¢‚Äù‚Äö gzip: 179.38 kB[22m
node.exe : [33m
At line:1 char:1
+ & "C:\Program Files\nodejs/node.exe" "C:\Program Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: ([33m:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.[39m
[32m√¢≈ì‚Äú built in 7.89s[39m
  dist\index.js  149.5kb
Done in 23ms
‚ñ∂Ô∏è Starting application...
[PM2][WARN] Applications fmb-timetracker not running, starting...
[PM2] App [fmb-timetracker] launched (1 instances)
√¢‚Äù≈í√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢
‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù
‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬ê
√¢‚Äù‚Äö id √¢‚Äù‚Äö name               √¢‚Äù‚Äö namespace   √¢‚Äù‚Äö version √¢‚Äù‚Äö mode    √¢‚Äù‚Äö pid      √¢‚Äù‚Äö uptime √¢‚Äù‚Äö √¢‚Ä†¬∫    √¢‚Äù‚Äö status    √¢‚Äù‚Äö cpu      √¢‚Äù‚Äö mem      √¢‚Äù‚Äö user     √¢‚Äù‚Äö watching √¢‚Äù‚Äö
√¢‚Äù≈ì√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬º√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬º√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬º√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬º√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬º√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢
‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬º√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬º√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬º√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬º√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬º√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬º√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬º√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù
‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬§
√¢‚Äù‚Äö 0  √¢‚Äù‚Äö fmb-timetracker    √¢‚Äù‚Äö default     √¢‚Äù‚Äö 1.0.0   √¢‚Äù‚Äö fork    √¢‚Äù‚Äö 4132     √¢‚Äù‚Äö 0s     √¢‚Äù‚Äö 0    √¢‚Äù‚Äö online    √¢‚Äù‚Äö 0%       √¢‚Äù‚Äö 64.1mb   √¢‚Äù‚Äö ADM91381 √¢‚Äù‚Äö disabled √¢‚Äù‚Äö
√¢‚Äù‚Äù√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢
‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù¬¥√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù
‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨√¢‚ÄùÀú
ConvertFrom-Json : Cannot convert the JSON string because a dictionary that was converted from the string contains the duplicated keys 'username' and 'USERNAME'.
At line:53 char:27
+ $status = npx pm2 jlist | ConvertFrom-Json
+                           ~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (:) [ConvertFrom-Json], InvalidOperationException
    + FullyQualifiedErrorId : DuplicateKeysInJsonString,Microsoft.PowerShell.Commands.ConvertFromJsonCommand
 
‚ùå Deployment failed
[TAILING] Tailing last 10 lines for [fmb-timetracker] process (change the value with --lines option)
C:\fmb-timetracker\logs\err-0.log last 10 lines:
0|fmb-time | 2025-08-30T21:53:44:     at checkDatabaseHealth2 (file:///C:/fmb-timetracker/dist/index.js:2694:20)
0|fmb-time | 2025-08-30T21:53:44:     at file:///C:/fmb-timetracker/dist/index.js:3631:31
0|fmb-time | 2025-08-30T21:53:44:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
0|fmb-time | 2025-08-30T21:53:44:     at next (C:\fmb-timetracker\node_modules\express\lib\router\route.js:149:13)
0|fmb-time | 2025-08-30T21:53:44:     at Route.dispatch (C:\fmb-timetracker\node_modules\express\lib\router\route.js:119:3)
0|fmb-time | 2025-08-30T21:53:44:     at Layer.handle [as handle_request] (C:\fmb-timetracker\node_modules\express\lib\router\layer.js:95:5)
0|fmb-time | 2025-08-30T21:53:44:     at C:\fmb-timetracker\node_modules\express\lib\router\index.js:284:15
0|fmb-time | 2025-08-30T21:53:44:     at Function.process_params (C:\fmb-timetracker\node_modules\express\lib\router\index.js:346:12)
0|fmb-time | 2025-08-30T21:53:44:     at next (C:\fmb-timetracker\node_modules\express\lib\router\index.js:280:10)
0|fmb-time | 2025-08-30T21:53:44:     at strategy.pass (C:\fmb-timetracker\node_modules\passport\lib\middleware\authenticate.js:355:9)

C:\fmb-timetracker\logs\out-0.log last 10 lines:
0|fmb-time | 2025-08-30T22:09:27: √¢≈ì‚Ä¶ [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
0|fmb-time | 2025-08-30T22:09:27: √∞≈∏‚Äù‚Äî [FMB-STORAGE] Connecting to FMB MS SQL Server...
0|fmb-time | 2025-08-30T22:09:27: 2025-08-31T05:09:27.651Z √∞≈∏‚Äù¬µ [FMB-SAML] FMB SAML Authentication setup completed
0|fmb-time | 2025-08-30T22:09:27: √∞≈∏‚Ä∫¬°√Ø¬∏¬è [SESSION-MGMT] Enterprise session management routes registered
0|fmb-time | 2025-08-30T22:09:27: √∞≈∏‚Ä∫¬°√Ø¬∏¬è [SESSION-MGMT] Enterprise session management routes registered
0|fmb-time | 2025-08-30T22:09:27: 2025-08-31T05:09:27.655Z √∞≈∏≈∏¬¢ [SERVER] FMB TimeTracker running on http://0.0.0.0:3000
0|fmb-time | 2025-08-30T22:09:27: 2025-08-31T05:09:27.656Z √∞≈∏≈∏¬¢ [SERVER] Environment: fmb-onprem
0|fmb-time | 2025-08-30T22:09:27: 2025-08-31T05:09:27.656Z √∞≈∏≈∏¬¢ [FMB-ONPREM] On-premises deployment active - SAML authentication enabled
0|fmb-time | 2025-08-30T22:09:27: 2025-08-31T05:09:27.757Z √∞≈∏‚Äî‚Äû√Ø¬∏¬è [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
0|fmb-time | 2025-08-30T22:09:27: √∞≈∏≈∏¬¢ [FMB-SESSION] Session table structure verified

0|fmb-timetracker  | 2025-08-30T22:09:56: 2025-08-31T05:09:56.787Z √∞≈∏‚Äù¬µ [FMB-SAML] SAML ACS callback received {
0|fmb-timetracker  | 2025-08-30T22:09:56:   "ip": "192.168.210.12:57629",
0|fmb-timetracker  | 2025-08-30T22:09:56:   "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
0|fmb-timetracker  | 2025-08-30T22:09:56:   "timestamp": "2025-08-31T05:09:56.787Z"
0|fmb-timetracker  | 2025-08-30T22:09:56: }
0|fmb-timetracker  | 2025-08-30T22:09:56: 2025-08-31T05:09:56.801Z √∞≈∏‚Äù¬¥ [FMB-SAML] SAML authentication error {
0|fmb-timetracker  | 2025-08-30T22:09:56:   "error": "Invalid document signature"
0|fmb-timetracker  | 2025-08-30T22:09:56: }
0|fmb-timetracker  | 2025-08-30T22:09:56: 2025-08-31T05:09:56.904Z √∞≈∏‚Äù¬¥ [FMB-SAML] SAML login error page accessed
