2025-09-02T15:59:17: 2025-09-02T22:59:17.913Z 🟢 [SERVER] Starting FMB TimeTracker On-Premises Application...
2025-09-02T15:59:17: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: 🛠️  run anywhere with `dotenvx run -- yourcommand`
2025-09-02T15:59:17: [dotenv@17.2.1] injecting env (23) from .env -- tip: ⚙️  override existing env vars with { override: true }
2025-09-02T15:59:17: 🏢 FMB On-Premises configuration loaded
2025-09-02T15:59:17: 🔍 [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-09-02T15:59:17: ✅ [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-09-02T15:59:17: 🔍 [FMB-CONFIG] Certificate length: 1004 characters
2025-09-02T15:59:17: 2025-09-02T22:59:17.919Z 🟢 [FMB-ONPREM] FMB On-premises environment initialized
2025-09-02T15:59:17: 2025-09-02T22:59:17.919Z 🟢 [CONFIG] FMB session secret validated successfully
2025-09-02T15:59:17: 🔗 Connecting to FMB MS SQL database...
2025-09-02T15:59:18: ✅ FMB Database connection established successfully
2025-09-02T15:59:18: 2025-09-02T22:59:18.017Z 🟢 [DATABASE] FMB Database initialization completed successfully
2025-09-02T15:59:18: 2025-09-02T22:59:18.020Z 🟢 [SESSION] FMB Enterprise Session configured for production mode
2025-09-02T15:59:18: 2025-09-02T22:59:18.020Z 🟢 [SESSION] Using memory session store for development/testing
2025-09-02T15:59:18: 2025-09-02T22:59:18.020Z 🟢 [SESSION] Session store initialization completed
2025-09-02T15:59:18: Warning: connect.session() MemoryStore is not
2025-09-02T15:59:18: designed for a production environment, as it will leak
2025-09-02T15:59:18: memory, and will not scale past a single process.
2025-09-02T15:59:18: 2025-09-02T22:59:18.021Z 🟢 [SERVER] FMB Session middleware configured successfully
2025-09-02T15:59:18: 2025-09-02T22:59:18.023Z 🟢 [SECURITY] Enterprise session security middleware activated
2025-09-02T15:59:18: 🚀 Setting up FMB SAML Authentication for On-Premises environment...
2025-09-02T15:59:18: 2025-09-02T22:59:18.025Z 🔵 [FMB-SAML] Initializing FMB SAML Authentication
2025-09-02T15:59:18: 🔧 [FMB-DATABASE] Creating new FMB storage instance...
2025-09-02T15:59:18: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: 📡 observe env with Radar: https://dotenvx.com/radar
2025-09-02T15:59:18: [dotenv@17.2.1] injecting env (0) from .env -- tip: ⚙️  specify custom .env file path with { path: '/custom/path/.env' }
2025-09-02T15:59:18: 🏢 FMB On-Premises configuration loaded
2025-09-02T15:59:18: 🔍 [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-09-02T15:59:18: ✅ [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-09-02T15:59:18: 🔍 [FMB-CONFIG] Certificate length: 1004 characters
2025-09-02T15:59:18: 🔗 [FMB-STORAGE] Connecting to FMB MS SQL Server...
2025-09-02T15:59:18: 2025-09-02T22:59:18.028Z 🟢 [FMB-SAML] SAML Certificate validation {
2025-09-02T15:59:18:   "certLength": 1004,
2025-09-02T15:59:18:   "hasBeginMarker": true,
2025-09-02T15:59:18:   "hasEndMarker": true
2025-09-02T15:59:18: }
2025-09-02T15:59:18: 2025-09-02T22:59:18.029Z 🔵 [FMB-SAML] FMB SAML Authentication setup completed
2025-09-02T15:59:18: 🛡️ [SESSION-MGMT] Enterprise session management routes registered
2025-09-02T15:59:18: 🛡️ [SESSION-MGMT] Enterprise session management routes registered
2025-09-02T15:59:18: 2025-09-02T22:59:18.034Z 🟢 [SERVER] FMB TimeTracker running on http://0.0.0.0:3000
2025-09-02T15:59:18: 2025-09-02T22:59:18.034Z 🟢 [SERVER] Environment: fmb-onprem
2025-09-02T15:59:18: 2025-09-02T22:59:18.034Z 🟢 [FMB-ONPREM] On-premises deployment active - SAML authentication enabled
2025-09-02T15:59:18: 2025-09-02T22:59:18.094Z 🗄️ [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
2025-09-02T15:59:38: 2025-09-02T22:59:38.759Z 🔵 [FMB-SAML] SAML ACS callback received - IdP-initiated flow {
2025-09-02T15:59:38:   "ip": "192.168.209.85:52727",
2025-09-02T15:59:38:   "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
2025-09-02T15:59:38:   "timestamp": "2025-09-02T22:59:38.759Z",
2025-09-02T15:59:38:   "hasBody": true,
2025-09-02T15:59:38:   "bodyKeys": [
2025-09-02T15:59:38:     "SAMLResponse"
2025-09-02T15:59:38:   ],
2025-09-02T15:59:38:   "headers": {
2025-09-02T15:59:38:     "content-type": "application/x-www-form-urlencoded",
2025-09-02T15:59:38:     "content-length": "8093"
2025-09-02T15:59:38:   }
2025-09-02T15:59:38: }
2025-09-02T15:59:38: 2025-09-02T22:59:38.830Z 🔵 [FMB-SAML] SAML profile received {
2025-09-02T15:59:38:   "nameID": "Sravan.Modugula@fmb.com",
2025-09-02T15:59:38:   "email": "Sravan.Modugula@fmb.com",
2025-09-02T15:59:38:   "firstName": "Sravan",
2025-09-02T15:59:38:   "lastName": "Modugula"
2025-09-02T15:59:38: }
2025-09-02T15:59:38: 🗄️ [SQL] Executing with 1 parameters
2025-09-02T15:59:38: 2025-09-02T22:59:38.934Z 🗄️ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756853978831-2i7q3l', recordCount: 1 }
2025-09-02T15:59:38: 🔄 [SQL] 
2025-09-02T15:59:38:  operation on users
2025-09-02T15:59:38: 🗄️ [SQL] Executing with 7 parameters
2025-09-02T15:59:38: ✅ [SQL] Operation completed: 1 rows affected
2025-09-02T15:59:38: 2025-09-02T22:59:38.980Z 🗄️ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756853978935-57a645', recordCount: 0 }
2025-09-02T15:59:38: 🗄️ [SQL] Executing with 1 parameters
2025-09-02T15:59:39: 2025-09-02T22:59:39.010Z 🗄️ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756853978980-yqppsi', recordCount: 1 }
2025-09-02T15:59:39: 2025-09-02T22:59:39.010Z 🔵 [FMB-SAML] User upserted in database {
2025-09-02T15:59:39:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T15:59:39: }
2025-09-02T15:59:39: 2025-09-02T22:59:39.010Z 🔵 [FMB-SAML] User authenticated and stored {
2025-09-02T15:59:39:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T15:59:39: }
2025-09-02T15:59:39: 2025-09-02T22:59:39.011Z 🟢 [FMB-SAML] Serializing user for session {
2025-09-02T15:59:39:   "userId": "user-1756847838064",
2025-09-02T15:59:39:   "timestamp": "2025-09-02T22:59:39.011Z",
2025-09-02T15:59:39:   "source": "saml"
2025-09-02T15:59:39: }
2025-09-02T15:59:39: 2025-09-02T22:59:39.012Z 🔵 [FMB-SAML] SAML authentication successful, redirecting to dashboard {
2025-09-02T15:59:39:   "email": "Sravan.Modugula@fmb.com",
2025-09-02T15:59:39:   "sessionId": "01826c65686026ccce5fe42ff80702b663d576f6e34b57e55702299d5c368429"
2025-09-02T15:59:39: }
2025-09-02T15:59:39: 🗄️ [SQL] Executing with 1 parameters
2025-09-02T15:59:39: 2025-09-02T22:59:39.087Z 🗄️ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756853979059-b2jm2y', recordCount: 1 }
2025-09-02T15:59:39: 2025-09-02T22:59:39.088Z 🟢 [FMB-SAML] User deserialized successfully {
2025-09-02T15:59:39:   "userId": "user-1756847838064",
2025-09-02T15:59:39:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T15:59:39: }
2025-09-02T15:59:39: 🗄️ [SQL] Executing with 1 parameters
2025-09-02T15:59:39: 🗄️ [SQL] Executing with 1 parameters
2025-09-02T15:59:39: 🗄️ [SQL] Executing with 1 parameters
2025-09-02T15:59:39: 🗄️ [SQL] Executing with 1 parameters
2025-09-02T15:59:39: 🗄️ [SQL] Executing with 1 parameters
2025-09-02T15:59:39: 🗄️ [SQL] Executing with 1 parameters
2025-09-02T15:59:39: 🗄️ [SQL] Executing with 1 parameters
2025-09-02T15:59:39: 2025-09-02T22:59:39.227Z 🗄️ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756853979194-ysg4wi', recordCount: 1 }
2025-09-02T15:59:39: 2025-09-02T22:59:39.228Z 🟢 [FMB-SAML] User deserialized successfully {
2025-09-02T15:59:39:   "userId": "user-1756847838064",
2025-09-02T15:59:39:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T15:59:39: }
2025-09-02T15:59:39: 2025-09-02T22:59:39.255Z 🗄️ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756853979197-wbbqd1', recordCount: 1 }
2025-09-02T15:59:39: 2025-09-02T22:59:39.255Z 🟢 [FMB-SAML] User deserialized successfully {
2025-09-02T15:59:39:   "userId": "user-1756847838064",
2025-09-02T15:59:39:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T15:59:39: }
2025-09-02T15:59:39: 2025-09-02T22:59:39.281Z 🗄️ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756853979200-okjjpi', recordCount: 1 }
2025-09-02T15:59:39: 2025-09-02T22:59:39.282Z 🟢 [FMB-SAML] User deserialized successfully {
2025-09-02T15:59:39:   "userId": "user-1756847838064",
2025-09-02T15:59:39:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T15:59:39: }
2025-09-02T15:59:39: 2025-09-02T22:59:39.285Z 🗄️ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756853979203-uaqywf', recordCount: 1 }
2025-09-02T15:59:39: 2025-09-02T22:59:39.286Z 🟢 [FMB-SAML] User deserialized successfully {
2025-09-02T15:59:39:   "userId": "user-1756847838064",
2025-09-02T15:59:39:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T15:59:39: }
2025-09-02T15:59:39: 2025-09-02T22:59:39.288Z 🗄️ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756853979205-7ko816', recordCount: 1 }
2025-09-02T15:59:39: 2025-09-02T22:59:39.288Z 🟢 [FMB-SAML] User deserialized successfully {
2025-09-02T15:59:39:   "userId": "user-1756847838064",
2025-09-02T15:59:39:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T15:59:39: }
2025-09-02T15:59:39: 2025-09-02T22:59:39.291Z 🗄️ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756853979206-rkgc4m', recordCount: 1 }
2025-09-02T15:59:39: 2025-09-02T22:59:39.291Z 🟢 [FMB-SAML] User deserialized successfully {
2025-09-02T15:59:39:   "userId": "user-1756847838064",
2025-09-02T15:59:39:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T15:59:39: }
2025-09-02T15:59:39: 2025-09-02T22:59:39.293Z 🗄️ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756853979209-n7w240', recordCount: 1 }
2025-09-02T15:59:39: 2025-09-02T22:59:39.293Z 🟢 [FMB-SAML] User deserialized successfully {
2025-09-02T15:59:39:   "userId": "user-1756847838064",
2025-09-02T15:59:39:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T15:59:39: }
2025-09-02T15:59:39: 🗄️ [SQL] Executing with 1 parameters
2025-09-02T15:59:39: 2025-09-02T22:59:39.583Z 🗄️ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756853979555-rs1nqv', recordCount: 1 }
2025-09-02T15:59:39: 2025-09-02T22:59:39.583Z 🟢 [FMB-SAML] User deserialized successfully {
2025-09-02T15:59:39:   "userId": "user-1756847838064",
2025-09-02T15:59:39:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T15:59:39: }
