
# FMB TimeTracker Clean Deployment Script
# Cleans previous builds and deploys latest code

param(
    [string]$InstallPath = "C:\fmb-timetracker"
)

Write-Host "ğŸ§¹ FMB TimeTracker Clean Deployment" -ForegroundColor Green
Write-Host "====================================" -ForegroundColor Green

# Check admin privileges
if (-NOT ([Security.Principal.WindowsPrincipal] [Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole] "Administrator")) {
    Write-Host "âŒ Run as Administrator" -ForegroundColor Red
    exit 1
}

# Set working directory
Set-Location $InstallPath

# Stop existing application
Write-Host "â¹ï¸ Stopping application..." -ForegroundColor Yellow
npx pm2 delete fmb-timetracker 2>$null
Start-Sleep -Seconds 3

# Clean previous builds
Write-Host "ğŸ§¹ Cleaning previous builds..." -ForegroundColor Yellow
if (Test-Path "dist") {
    Remove-Item -Path "dist" -Recurse -Force
    Write-Host "   âœ… Removed dist folder" -ForegroundColor Green
}

if (Test-Path "node_modules") {
    Remove-Item -Path "node_modules" -Recurse -Force
    Write-Host "   âœ… Removed node_modules folder" -ForegroundColor Green
}

# Clean npm cache
Write-Host "ğŸ§¹ Cleaning npm cache..." -ForegroundColor Yellow
npm cache clean --force

# Create logs directory if it doesn't exist
if (-not (Test-Path "logs")) {
    New-Item -ItemType Directory -Path "logs" -Force | Out-Null
    Write-Host "   âœ… Created logs directory" -ForegroundColor Green
}

# Check environment file
Write-Host "ğŸ” Checking environment configuration..." -ForegroundColor Yellow
if (-not (Test-Path ".env")) {
    if (Test-Path "fmb-onprem/.env.fmb-onprem") {
        Copy-Item "fmb-onprem/.env.fmb-onprem" ".env"
        Write-Host "   âœ… Environment file copied" -ForegroundColor Green
    } else {
        Write-Host "   âŒ No .env file found" -ForegroundColor Red
        exit 1
    }
} else {
    Write-Host "   âœ… Environment file exists" -ForegroundColor Green
}

# Fresh install of dependencies
Write-Host "ğŸ“¦ Installing fresh dependencies..." -ForegroundColor Yellow
npm install --legacy-peer-deps

if ($LASTEXITCODE -ne 0) {
    Write-Host "âŒ Dependency installation failed" -ForegroundColor Red
    exit 1
}

Write-Host "   âœ… Dependencies installed" -ForegroundColor Green

# Set production environment variables
$env:NODE_ENV = "production"
$env:FMB_DEPLOYMENT = "onprem"

# Build application
Write-Host "ğŸ”¨ Building application..." -ForegroundColor Yellow
npm run build

if ($LASTEXITCODE -ne 0) {
    Write-Host "âŒ Build failed" -ForegroundColor Red
    exit 1
}

# Verify build output
if (-not (Test-Path "dist/index.js")) {
    Write-Host "âŒ Build output missing - dist/index.js not found" -ForegroundColor Red
    exit 1
}

if (-not (Test-Path "dist/public")) {
    Write-Host "âŒ Build output missing - dist/public not found" -ForegroundColor Red
    exit 1
}

Write-Host "   âœ… Build completed successfully" -ForegroundColor Green

# Start application with PM2
Write-Host "â–¶ï¸ Starting application..." -ForegroundColor Yellow
npx pm2 start ecosystem.config.cjs

if ($LASTEXITCODE -ne 0) {
    Write-Host "âŒ Failed to start application with PM2" -ForegroundColor Red
    exit 1
}

# Wait for application to start
Write-Host "â³ Waiting for application to start..." -ForegroundColor Yellow
Start-Sleep -Seconds 15

# Check PM2 status
$status = npx pm2 jlist | ConvertFrom-Json
$app = $status | Where-Object { $_.name -eq "fmb-timetracker" }

if ($app -and $app.pm2_env.status -eq "online") {
    Write-Host "âœ… Application started successfully!" -ForegroundColor Green
    Write-Host "ğŸŒ Application URL: http://localhost:3000" -ForegroundColor Green
    
    # Health check
    Write-Host "ğŸ¥ Performing health check..." -ForegroundColor Yellow
    Start-Sleep -Seconds 5
    
    try {
        $response = Invoke-WebRequest -Uri "http://localhost:3000/api/health" -UseBasicParsing -TimeoutSec 15
        if ($response.StatusCode -eq 200) {
            Write-Host "   âœ… Health check passed" -ForegroundColor Green
            $healthData = $response.Content | ConvertFrom-Json
            Write-Host "   ğŸ“Š Status: $($healthData.status)" -ForegroundColor Cyan
        }
    } catch {
        Write-Host "   âš ï¸ Health check failed - $($_.Exception.Message)" -ForegroundColor Yellow
        Write-Host "   ğŸ“‹ Check logs: npx pm2 logs fmb-timetracker" -ForegroundColor Cyan
    }
    
    # Save PM2 configuration
    npx pm2 save
    
    Write-Host ""
    Write-Host "ğŸ‰ FMB TimeTracker deployment completed successfully!" -ForegroundColor Green
    Write-Host ""
    Write-Host "ğŸ“‹ Management Commands:" -ForegroundColor Cyan
    Write-Host "   â€¢ Status: npx pm2 status" -ForegroundColor White
    Write-Host "   â€¢ Logs: npx pm2 logs fmb-timetracker" -ForegroundColor White
    Write-Host "   â€¢ Restart: npx pm2 restart fmb-timetracker" -ForegroundColor White
    Write-Host "   â€¢ Stop: npx pm2 stop fmb-timetracker" -ForegroundColor White
    Write-Host ""
    Write-Host "ğŸ”— Access Points:" -ForegroundColor Cyan
    Write-Host "   â€¢ Internal: http://localhost:3000" -ForegroundColor White
    Write-Host "   â€¢ External: https://timetracker.fmb.com (via IIS)" -ForegroundColor White
    
} else {
    Write-Host "âŒ Application failed to start" -ForegroundColor Red
    Write-Host "ğŸ“‹ Checking logs..." -ForegroundColor Yellow
    npx pm2 logs fmb-timetracker --lines 20
    exit 1
}

Write-Host ""
Write-Host "âœ¨ Clean deployment completed!" -ForegroundColor Green
2025-09-01T00:31:41: 2025-09-01T07:31:41.458Z ğŸŸ¢ [SERVER] Starting FMB TimeTracker On-Premises Application...
2025-09-01T00:31:41: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: ğŸ” prevent building .env in docker: https://dotenvx.com/prebuild
2025-09-01T00:31:41: [dotenv@17.2.1] injecting env (23) from .env -- tip: ğŸ“¡ auto-backup env with Radar: https://dotenvx.com/radar
2025-09-01T00:31:41: ğŸ¢ FMB On-Premises configuration loaded
2025-09-01T00:31:41: ğŸ” [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-09-01T00:31:41: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-09-01T00:31:41: ğŸ” [FMB-CONFIG] Certificate length: 1004 characters
2025-09-01T00:31:41: 2025-09-01T07:31:41.464Z ğŸŸ¢ [FMB-ONPREM] FMB On-premises environment initialized
2025-09-01T00:31:41: 2025-09-01T07:31:41.464Z ğŸŸ¢ [CONFIG] FMB session secret validated successfully
2025-09-01T00:31:41: ğŸ”— Connecting to FMB MS SQL database...
2025-09-01T00:31:41: âœ… FMB Database connection established successfully
2025-09-01T00:31:41: 2025-09-01T07:31:41.563Z ğŸŸ¢ [DATABASE] FMB Database initialization completed successfully
2025-09-01T00:31:41: 2025-09-01T07:31:41.567Z ğŸŸ¢ [SESSION] FMB Enterprise Session configured for production mode
2025-09-01T00:31:41: 2025-09-01T07:31:41.567Z ğŸŸ¢ [SESSION] Initializing MS SQL session store for production
2025-09-01T00:31:41: 2025-09-01T07:31:41.569Z ğŸŸ¢ [SESSION] Custom MS SQL session store initialized successfully
2025-09-01T00:31:41: 2025-09-01T07:31:41.569Z ğŸŸ¢ [SESSION] Session store initialization completed
2025-09-01T00:31:41: 2025-09-01T07:31:41.569Z ğŸŸ¢ [SERVER] FMB Session middleware configured successfully
2025-09-01T00:31:41: 2025-09-01T07:31:41.596Z ğŸŸ¢ [SECURITY] Enterprise session security middleware activated
2025-09-01T00:31:41: ğŸš€ Setting up FMB SAML Authentication for On-Premises environment...
2025-09-01T00:31:41: 2025-09-01T07:31:41.600Z ğŸ”µ [FMB-SAML] Initializing FMB SAML Authentication
2025-09-01T00:31:41: ğŸ”§ [FMB-DATABASE] Creating new FMB storage instance...
2025-09-01T00:31:41: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com
2025-09-01T00:31:41: [dotenv@17.2.1] injecting env (0) from .env -- tip: ğŸ” prevent building .env in docker: https://dotenvx.com/prebuild
2025-09-01T00:31:41: ğŸ¢ FMB On-Premises configuration loaded
2025-09-01T00:31:41: ğŸ” [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-09-01T00:31:41: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-09-01T00:31:41: ğŸ” [FMB-CONFIG] Certificate length: 1004 characters
2025-09-01T00:31:41: ğŸ”— [FMB-STORAGE] Connecting to FMB MS SQL Server...
2025-09-01T00:31:41: 2025-09-01T07:31:41.602Z ğŸŸ¢ [FMB-SAML] SAML Certificate validation {
2025-09-01T00:31:41:   "certLength": 1004,
2025-09-01T00:31:41:   "hasBeginMarker": true,
2025-09-01T00:31:41:   "hasEndMarker": true
2025-09-01T00:31:41: }
2025-09-01T00:31:41: 2025-09-01T07:31:41.603Z ğŸ”µ [FMB-SAML] FMB SAML Authentication setup completed
2025-09-01T00:31:41: ğŸ›¡ï¸ [SESSION-MGMT] Enterprise session management routes registered
2025-09-01T00:31:41: ğŸ›¡ï¸ [SESSION-MGMT] Enterprise session management routes registered
2025-09-01T00:31:41: 2025-09-01T07:31:41.608Z ğŸŸ¢ [SERVER] FMB TimeTracker running on http://0.0.0.0:3000
2025-09-01T00:31:41: 2025-09-01T07:31:41.608Z ğŸŸ¢ [SERVER] Environment: fmb-onprem
2025-09-01T00:31:41: 2025-09-01T07:31:41.608Z ğŸŸ¢ [FMB-ONPREM] On-premises deployment active - SAML authentication enabled
2025-09-01T00:31:41: 2025-09-01T07:31:41.676Z ğŸ—„ï¸ [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
2025-09-01T00:31:41: ğŸŸ¢ [FMB-SESSION] Session table structure verified
2025-09-01T00:32:26: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:26: 2025-09-01T07:32:26.605Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711946510-le5n57', recordCount: 1 }
2025-09-01T00:32:26: 2025-09-01T07:32:26.606Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:26:   "userId": "user-1756655138413",
2025-09-01T00:32:26:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:26: }
2025-09-01T00:32:26: 2025-09-01T07:32:26.607Z ğŸ”µ [FMB-SAML] SAML ACS callback received - IdP-initiated flow {
2025-09-01T00:32:26:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:26:   "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
2025-09-01T00:32:26:   "timestamp": "2025-09-01T07:32:26.607Z",
2025-09-01T00:32:26:   "hasBody": true,
2025-09-01T00:32:26:   "bodyKeys": [
2025-09-01T00:32:26:     "SAMLResponse"
2025-09-01T00:32:26:   ],
2025-09-01T00:32:26:   "headers": {
2025-09-01T00:32:26:     "content-type": "application/x-www-form-urlencoded",
2025-09-01T00:32:26:     "content-length": "8093"
2025-09-01T00:32:26:   }
2025-09-01T00:32:26: }
2025-09-01T00:32:26: 2025-09-01T07:32:26.683Z ğŸ”µ [FMB-SAML] SAML profile received {
2025-09-01T00:32:26:   "nameID": "Sravan.Modugula@fmb.com",
2025-09-01T00:32:26:   "email": "Sravan.Modugula@fmb.com",
2025-09-01T00:32:26:   "firstName": "Sravan",
2025-09-01T00:32:26:   "lastName": "Modugula"
2025-09-01T00:32:26: }
2025-09-01T00:32:26: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:26: 2025-09-01T07:32:26.719Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711946684-httw39', recordCount: 1 }
2025-09-01T00:32:26: ğŸ”„ [SQL] 
2025-09-01T00:32:26:  operation on users
2025-09-01T00:32:26: ğŸ—„ï¸ [SQL] Executing with 7 parameters
2025-09-01T00:32:26: âœ… [SQL] Operation completed: 1 rows affected
2025-09-01T00:32:26: 2025-09-01T07:32:26.766Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711946719-5b4vtw', recordCount: 0 }
2025-09-01T00:32:26: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:26: 2025-09-01T07:32:26.796Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711946766-rqxg34', recordCount: 1 }
2025-09-01T00:32:26: 2025-09-01T07:32:26.796Z ğŸ”µ [FMB-SAML] User upserted in database {
2025-09-01T00:32:26:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:26: }
2025-09-01T00:32:26: 2025-09-01T07:32:26.796Z ğŸ”µ [FMB-SAML] User authenticated and stored {
2025-09-01T00:32:26:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:26: }
2025-09-01T00:32:26: ğŸ—‘ï¸ [FMB-SESSION] Session destroyed successfully
2025-09-01T00:32:26: 2025-09-01T07:32:26.885Z ğŸŸ¢ [FMB-SAML] Serializing user for session {
2025-09-01T00:32:26:   "userId": "user-1756655138413",
2025-09-01T00:32:26:   "timestamp": "2025-09-01T07:32:26.885Z",
2025-09-01T00:32:26:   "source": "saml"
2025-09-01T00:32:26: }
2025-09-01T00:32:26: ğŸ”µ [FMB-SAML] User session established and saved: Sravan.Modugula@fmb.com
2025-09-01T00:32:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:27: 2025-09-01T07:32:27.146Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711947117-pmc4s7', recordCount: 1 }
2025-09-01T00:32:27: 2025-09-01T07:32:27.146Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:27:   "userId": "user-1756655138413",
2025-09-01T00:32:27:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:27: }
2025-09-01T00:32:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:27: 2025-09-01T07:32:27.342Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711947294-57nlnq', recordCount: 1 }
2025-09-01T00:32:27: 2025-09-01T07:32:27.343Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:27:   "userId": "user-1756655138413",
2025-09-01T00:32:27:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:27: }
2025-09-01T00:32:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:27: 2025-09-01T07:32:27.370Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711947323-dv8d5y', recordCount: 1 }
2025-09-01T00:32:27: 2025-09-01T07:32:27.370Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:27:   "userId": "user-1756655138413",
2025-09-01T00:32:27:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:27: }
2025-09-01T00:32:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:27: 2025-09-01T07:32:27.403Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711947352-m5lemx', recordCount: 1 }
2025-09-01T00:32:27: 2025-09-01T07:32:27.403Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:27:   "userId": "user-1756655138413",
2025-09-01T00:32:27:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:27: }
2025-09-01T00:32:27: 2025-09-01T07:32:27.417Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711947362-hb5xxz', recordCount: 1 }
2025-09-01T00:32:27: 2025-09-01T07:32:27.418Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:27:   "userId": "user-1756655138413",
2025-09-01T00:32:27:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:27: }
2025-09-01T00:32:27: 2025-09-01T07:32:27.452Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711947364-cykh50', recordCount: 1 }
2025-09-01T00:32:27: 2025-09-01T07:32:27.452Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:27:   "userId": "user-1756655138413",
2025-09-01T00:32:27:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:27: }
2025-09-01T00:32:27: 2025-09-01T07:32:27.456Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711947371-vbjly1', recordCount: 1 }
2025-09-01T00:32:27: 2025-09-01T07:32:27.456Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:27:   "userId": "user-1756655138413",
2025-09-01T00:32:27:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:27: }
2025-09-01T00:32:27: 2025-09-01T07:32:27.461Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711947368-e9b6z0', recordCount: 1 }
2025-09-01T00:32:27: 2025-09-01T07:32:27.461Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:27:   "userId": "user-1756655138413",
2025-09-01T00:32:27:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:27: }
2025-09-01T00:32:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:27: 2025-09-01T07:32:27.872Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711947844-m420hs', recordCount: 1 }
2025-09-01T00:32:27: 2025-09-01T07:32:27.873Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:27:   "userId": "user-1756655138413",
2025-09-01T00:32:27:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:27: }
2025-09-01T00:32:27: 2025-09-01T07:32:27.873Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-01T00:32:27:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:27:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:27:   "isAuthenticated": true
2025-09-01T00:32:27: }
2025-09-01T00:32:27: 2025-09-01T07:32:27.873Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:27:   "userId": "user-1756655138413",
2025-09-01T00:32:27:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:27: }
2025-09-01T00:32:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:27: 2025-09-01T07:32:27.900Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711947869-5kd83j', recordCount: 1 }
2025-09-01T00:32:27: 2025-09-01T07:32:27.900Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:27:   "userId": "user-1756655138413",
2025-09-01T00:32:27:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:27: }
2025-09-01T00:32:27: 2025-09-01T07:32:27.904Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711947874-hgh8mc', recordCount: 1 }
2025-09-01T00:32:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:28: 2025-09-01T07:32:28.140Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711948105-gogf3h', recordCount: 1 }
2025-09-01T00:32:28: 2025-09-01T07:32:28.140Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:28:   "userId": "user-1756655138413",
2025-09-01T00:32:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.141Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/dashboard/project-breakdown {
2025-09-01T00:32:28:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:28:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:28:   "isAuthenticated": true
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.141Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:28:   "userId": "user-1756655138413",
2025-09-01T00:32:28:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.142Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711948107-9clglk', recordCount: 1 }
2025-09-01T00:32:28: 2025-09-01T07:32:28.142Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:28:   "userId": "user-1756655138413",
2025-09-01T00:32:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.142Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-01T00:32:28:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:28:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:28:   "isAuthenticated": true
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.142Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:28:   "userId": "user-1756655138413",
2025-09-01T00:32:28:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:28: }
2025-09-01T00:32:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:28: 2025-09-01T07:32:28.144Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711948107-vsmzbg', recordCount: 1 }
2025-09-01T00:32:28: 2025-09-01T07:32:28.145Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:28:   "userId": "user-1756655138413",
2025-09-01T00:32:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.145Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/dashboard/recent-activity {
2025-09-01T00:32:28:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:28:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:28:   "isAuthenticated": true
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.145Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:28:   "userId": "user-1756655138413",
2025-09-01T00:32:28:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.147Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711948110-cqwnt4', recordCount: 1 }
2025-09-01T00:32:28: 2025-09-01T07:32:28.147Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:28:   "userId": "user-1756655138413",
2025-09-01T00:32:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.147Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/organizations {
2025-09-01T00:32:28:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:28:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:28:   "isAuthenticated": true
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.147Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:28:   "userId": "user-1756655138413",
2025-09-01T00:32:28:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.148Z ğŸ—„ï¸ [FMB-STORAGE] GET_USER_ORGS: Fetching organizations for user { userId: 'user-1756655138413' }
2025-09-01T00:32:28: 2025-09-01T07:32:28.149Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711948110-pn465u', recordCount: 1 }
2025-09-01T00:32:28: 2025-09-01T07:32:28.149Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:28:   "userId": "user-1756655138413",
2025-09-01T00:32:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.149Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/dashboard/stats {
2025-09-01T00:32:28:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:28:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:28:   "isAuthenticated": true
2025-09-01T00:32:28: }
2025-09-01T00:32:28: 2025-09-01T07:32:28.149Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:28:   "userId": "user-1756655138413",
2025-09-01T00:32:28:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:28: }
2025-09-01T00:32:28: ğŸ—„ï¸ [SQL] Executing with 3 parameters
2025-09-01T00:32:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:28: 2025-09-01T07:32:28.194Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711948142-q1v4kj', recordCount: 1 }
2025-09-01T00:32:28: 2025-09-01T07:32:28.196Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711948150-7fkka8', recordCount: 1 }
2025-09-01T00:32:28: 2025-09-01T07:32:28.197Z ğŸ—„ï¸ [FMB-STORAGE] GET_USER_ORGS: User organizations fetched successfully { userId: 'user-1756655138413', count: 1 }
2025-09-01T00:32:28: 2025-09-01T07:32:28.218Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711948150-z0n206', recordCount: 1 }
2025-09-01T00:32:28: 2025-09-01T07:32:28.220Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711948150-avn8s2', recordCount: 1 }
2025-09-01T00:32:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:30: 2025-09-01T07:32:30.109Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711950080-a30vrz', recordCount: 1 }
2025-09-01T00:32:30: 2025-09-01T07:32:30.109Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:30:   "userId": "user-1756655138413",
2025-09-01T00:32:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:30: }
2025-09-01T00:32:30: 2025-09-01T07:32:30.110Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/users/current-role {
2025-09-01T00:32:30:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:30:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:30:   "isAuthenticated": true
2025-09-01T00:32:30: }
2025-09-01T00:32:30: 2025-09-01T07:32:30.110Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:30:   "userId": "user-1756655138413",
2025-09-01T00:32:30:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:30: }
2025-09-01T00:32:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:30: 2025-09-01T07:32:30.111Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711950079-wra681', recordCount: 1 }
2025-09-01T00:32:30: 2025-09-01T07:32:30.111Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:30:   "userId": "user-1756655138413",
2025-09-01T00:32:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:30: }
2025-09-01T00:32:30: 2025-09-01T07:32:30.111Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-01T00:32:30:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:30:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:30:   "isAuthenticated": true
2025-09-01T00:32:30: }
2025-09-01T00:32:30: 2025-09-01T07:32:30.111Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:30:   "userId": "user-1756655138413",
2025-09-01T00:32:30:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:30: }
2025-09-01T00:32:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:30: 2025-09-01T07:32:30.113Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711950081-dtgeaz', recordCount: 1 }
2025-09-01T00:32:30: 2025-09-01T07:32:30.113Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:30:   "userId": "user-1756655138413",
2025-09-01T00:32:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:30: }
2025-09-01T00:32:30: 2025-09-01T07:32:30.115Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711950087-vp86bf', recordCount: 1 }
2025-09-01T00:32:30: 2025-09-01T07:32:30.115Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:30:   "userId": "user-1756655138413",
2025-09-01T00:32:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:30: }
2025-09-01T00:32:30: 2025-09-01T07:32:30.134Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711950092-sl24gl', recordCount: 1 }
2025-09-01T00:32:30: 2025-09-01T07:32:30.135Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:30:   "userId": "user-1756655138413",
2025-09-01T00:32:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:30: }
2025-09-01T00:32:30: 2025-09-01T07:32:30.141Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711950110-8hlcpm', recordCount: 1 }
2025-09-01T00:32:30: 2025-09-01T07:32:30.145Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711950111-bi6ejn', recordCount: 1 }
2025-09-01T00:32:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:33: 2025-09-01T07:32:33.623Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711953572-xe0jfi', recordCount: 1 }
2025-09-01T00:32:33: 2025-09-01T07:32:33.624Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:33:   "userId": "user-1756655138413",
2025-09-01T00:32:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:33: }
2025-09-01T00:32:33: 2025-09-01T07:32:33.624Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for POST /api/users/change-role {
2025-09-01T00:32:33:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:33:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:33:   "isAuthenticated": true
2025-09-01T00:32:33: }
2025-09-01T00:32:33: 2025-09-01T07:32:33.624Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:33:   "userId": "user-1756655138413",
2025-09-01T00:32:33:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:33: }
2025-09-01T00:32:33: ğŸ—„ï¸ [FMB-STORAGE] UPDATE_USER_ROLE: { userId: 'user-1756655138413', role: 'admin' }
2025-09-01T00:32:33: âœ… [FMB-STORAGE] UPDATE_USER_ROLE: Role updated successfully
2025-09-01T00:32:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:33: 2025-09-01T07:32:33.871Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711953842-u34lyu', recordCount: 1 }
2025-09-01T00:32:33: 2025-09-01T07:32:33.871Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:33:   "userId": "user-1756655138413",
2025-09-01T00:32:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:33: }
2025-09-01T00:32:33: 2025-09-01T07:32:33.872Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711953841-emph86', recordCount: 1 }
2025-09-01T00:32:33: 2025-09-01T07:32:33.872Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:33:   "userId": "user-1756655138413",
2025-09-01T00:32:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:33: }
2025-09-01T00:32:33: 2025-09-01T07:32:33.873Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/users/current-role {
2025-09-01T00:32:33:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:33:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:33:   "isAuthenticated": true
2025-09-01T00:32:33: }
2025-09-01T00:32:33: 2025-09-01T07:32:33.873Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:33:   "userId": "user-1756655138413",
2025-09-01T00:32:33:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:33: }
2025-09-01T00:32:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:33: 2025-09-01T07:32:33.879Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711953843-7fq61u', recordCount: 1 }
2025-09-01T00:32:33: 2025-09-01T07:32:33.879Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:33:   "userId": "user-1756655138413",
2025-09-01T00:32:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:33: }
2025-09-01T00:32:33: 2025-09-01T07:32:33.879Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-01T00:32:33:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:33:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:33:   "isAuthenticated": true
2025-09-01T00:32:33: }
2025-09-01T00:32:33: 2025-09-01T07:32:33.879Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:33:   "userId": "user-1756655138413",
2025-09-01T00:32:33:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:33: }
2025-09-01T00:32:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:33: 2025-09-01T07:32:33.907Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711953873-wotst5', recordCount: 1 }
2025-09-01T00:32:33: 2025-09-01T07:32:33.913Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711953880-kb9jdc', recordCount: 1 }
2025-09-01T00:32:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:34: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:34: 2025-09-01T07:32:34.018Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711953989-pf31qy', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.018Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.020Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711953991-nouxfa', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.021Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.022Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711953994-diicdl', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.022Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.025Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711953992-b81xoj', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.025Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.026Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711953993-da6fwv', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.026Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.027Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711953986-zm23gp', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.027Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.045Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711954009-r9x9lp', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.045Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:34: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:34: 2025-09-01T07:32:34.293Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711954260-isjeib', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.293Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.293Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-01T00:32:34:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:34:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:34:   "isAuthenticated": true
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.293Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:34: 2025-09-01T07:32:34.316Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711954276-33utrj', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.316Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.323Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711954293-iafwvk', recordCount: 1 }
2025-09-01T00:32:34: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:34: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:34: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:34: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:34: 2025-09-01T07:32:34.573Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711954546-0pr7n2', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.573Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.573Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-01T00:32:34:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:34:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:34:   "isAuthenticated": true
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.573Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:34: 2025-09-01T07:32:34.574Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711954549-www524', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.574Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.575Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/users/current-role {
2025-09-01T00:32:34:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:34:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:34:   "isAuthenticated": true
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.575Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:34: 2025-09-01T07:32:34.576Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711954547-q1j2l4', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.576Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.577Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711954550-sw0gqn', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.577Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:34:   "userId": "user-1756655138413",
2025-09-01T00:32:34:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:34: }
2025-09-01T00:32:34: 2025-09-01T07:32:34.603Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711954575-d7zq6o', recordCount: 1 }
2025-09-01T00:32:34: 2025-09-01T07:32:34.615Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711954573-i5r3ql', recordCount: 1 }
2025-09-01T00:32:42: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:42: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:42: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:42: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:42: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:42: 2025-09-01T07:32:42.816Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711962785-sgxmgl', recordCount: 1 }
2025-09-01T00:32:42: 2025-09-01T07:32:42.816Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:42:   "userId": "user-1756655138413",
2025-09-01T00:32:42:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:42: }
2025-09-01T00:32:42: 2025-09-01T07:32:42.816Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/projects {
2025-09-01T00:32:42:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:42:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:42:   "isAuthenticated": true
2025-09-01T00:32:42: }
2025-09-01T00:32:42: 2025-09-01T07:32:42.817Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:42:   "userId": "user-1756655138413",
2025-09-01T00:32:42:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:42: }
2025-09-01T00:32:42: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:42: 2025-09-01T07:32:42.818Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711962788-1nut7t', recordCount: 1 }
2025-09-01T00:32:42: 2025-09-01T07:32:42.819Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:42:   "userId": "user-1756655138413",
2025-09-01T00:32:42:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:42: }
2025-09-01T00:32:42: 2025-09-01T07:32:42.819Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/organizations {
2025-09-01T00:32:42:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:42:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:42:   "isAuthenticated": true
2025-09-01T00:32:42: }
2025-09-01T00:32:42: 2025-09-01T07:32:42.819Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:42:   "userId": "user-1756655138413",
2025-09-01T00:32:42:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:42: }
2025-09-01T00:32:42: 2025-09-01T07:32:42.819Z ğŸ—„ï¸ [FMB-STORAGE] GET_USER_ORGS: Fetching organizations for user { userId: 'user-1756655138413' }
2025-09-01T00:32:42: 2025-09-01T07:32:42.820Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711962786-df0jjg', recordCount: 1 }
2025-09-01T00:32:42: 2025-09-01T07:32:42.820Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:42:   "userId": "user-1756655138413",
2025-09-01T00:32:42:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:42: }
2025-09-01T00:32:42: 2025-09-01T07:32:42.820Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-01T00:32:42:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:42:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:42:   "isAuthenticated": true
2025-09-01T00:32:42: }
2025-09-01T00:32:42: 2025-09-01T07:32:42.820Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:42:   "userId": "user-1756655138413",
2025-09-01T00:32:42:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:42: }
2025-09-01T00:32:42: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:42: 2025-09-01T07:32:42.822Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711962794-cc70jh', recordCount: 1 }
2025-09-01T00:32:42: 2025-09-01T07:32:42.822Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:42:   "userId": "user-1756655138413",
2025-09-01T00:32:42:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:42: }
2025-09-01T00:32:42: 2025-09-01T07:32:42.822Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/tasks {
2025-09-01T00:32:42:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:42:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:42:   "isAuthenticated": true
2025-09-01T00:32:42: }
2025-09-01T00:32:42: 2025-09-01T07:32:42.823Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:42:   "userId": "user-1756655138413",
2025-09-01T00:32:42:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:42: }
2025-09-01T00:32:42: 2025-09-01T07:32:42.826Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711962789-dw135f', recordCount: 1 }
2025-09-01T00:32:42: 2025-09-01T07:32:42.827Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:42:   "userId": "user-1756655138413",
2025-09-01T00:32:42:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:42: }
2025-09-01T00:32:42: 2025-09-01T07:32:42.849Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711962817-jrxpeh', recordCount: 1 }
2025-09-01T00:32:42: 2025-09-01T07:32:42.854Z ğŸ—„ï¸ [FMB-STORAGE] GET_USER_ORGS: User organizations fetched successfully { userId: 'user-1756655138413', count: 1 }
2025-09-01T00:32:42: 2025-09-01T07:32:42.856Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711962821-1attex', recordCount: 1 }
2025-09-01T00:32:48: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:48: 2025-09-01T07:32:48.689Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711968656-0acpgv', recordCount: 1 }
2025-09-01T00:32:48: 2025-09-01T07:32:48.689Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:48:   "userId": "user-1756655138413",
2025-09-01T00:32:48:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:48: }
2025-09-01T00:32:48: 2025-09-01T07:32:48.690Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/tasks {
2025-09-01T00:32:48:   "ip": "192.168.210.12:59222",
2025-09-01T00:32:48:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4",
2025-09-01T00:32:48:   "isAuthenticated": true
2025-09-01T00:32:48: }
2025-09-01T00:32:48: 2025-09-01T07:32:48.690Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-01T00:32:48:   "userId": "user-1756655138413",
2025-09-01T00:32:48:   "sessionId": "f765e5fe2b9bd04acdbf05963d2eadcb9eae1c29e54c60a676328c7cd495f3a4"
2025-09-01T00:32:48: }
2025-09-01T00:32:58: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-01T00:32:58: 2025-09-01T07:32:58.351Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756711978310-ta0ya9', recordCount: 1 }
2025-09-01T00:32:58: 2025-09-01T07:32:58.351Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-01T00:32:58:   "userId": "user-1756655138413",
2025-09-01T00:32:58:   "email": "Sravan.Modugula@fmb.com"
2025-09-01T00:32:58: }

