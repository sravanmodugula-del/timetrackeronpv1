# FMB TimeTracker Simple Deployment Script
param(
    [string]$InstallPath = "C:\fmb-timetracker"
)

Write-Host "ğŸš€ FMB TimeTracker Deployment" -ForegroundColor Green

# Check admin privileges
if (-NOT ([Security.Principal.WindowsPrincipal] [Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole] "Administrator")) {
    Write-Host "âŒ Run as Administrator" -ForegroundColor Red
    exit 1
}

# Create logs directory
if (-not (Test-Path "$InstallPath\logs")) {
    New-Item -ItemType Directory -Path "$InstallPath\logs" -Force | Out-Null
}

# Check .env file
if (-not (Test-Path ".env")) {
    if (Test-Path "fmb-onprem/.env.fmb-onprem") {
        Copy-Item "fmb-onprem/.env.fmb-onprem" ".env"
        Write-Host "âœ… Environment file copied" -ForegroundColor Green
    } else {
        Write-Host "âŒ No .env file found" -ForegroundColor Red
        exit 1
    }
}

# Stop existing processes
Write-Host "â¹ï¸ Stopping application..." -ForegroundColor Yellow
npx pm2 delete fmb-timetracker 2>$null

# Install dependencies
Write-Host "ğŸ“¦ Installing dependencies..." -ForegroundColor Yellow
npm install --legacy-peer-deps

# Build application
Write-Host "ğŸ”¨ Building..." -ForegroundColor Yellow
npm run build

if (-not (Test-Path "dist/index.js")) {
    Write-Host "âŒ Build failed" -ForegroundColor Red
    exit 1
}

# Start application
Write-Host "â–¶ï¸ Starting application..." -ForegroundColor Yellow
npx pm2 start ecosystem.config.cjs

# Wait and check status
Start-Sleep -Seconds 15
$status = npx pm2 jlist | ConvertFrom-Json
$app = $status | Where-Object { $_.name -eq "fmb-timetracker" }

if ($app -and $app.pm2_env.status -eq "online") {
    Write-Host "âœ… Deployment successful!" -ForegroundColor Green
    Write-Host "ğŸŒ Check: http://localhost:3000" -ForegroundColor Green
    
    # Health check
    Start-Sleep -Seconds 5
    try {
        $response = Invoke-WebRequest -Uri "http://localhost:3000/health" -UseBasicParsing -TimeoutSec 10
        if ($response.StatusCode -eq 200) {
            Write-Host "âœ… Health check passed" -ForegroundColor Green
        }
    } catch {
        Write-Host "âš ï¸ Health check failed - check logs" -ForegroundColor Yellow
    }
} else {
    Write-Host "âŒ Deployment failed" -ForegroundColor Red
    npx pm2 logs fmb-timetracker --lines 10
    exit 1
}

Write-Host "ğŸ“‹ Commands: npx pm2 status | npx pm2 logs" -ForegroundColor Cyan


2025-09-02T12:49:00: 2025-09-02T19:49:00.989Z ğŸŸ¢ [SERVER] Starting FMB TimeTracker On-Premises Application...
2025-09-02T12:49:00: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: ğŸ” prevent committing .env to code: https://dotenvx.com/precommit
2025-09-02T12:49:00: [dotenv@17.2.1] injecting env (23) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
2025-09-02T12:49:00: ğŸ¢ FMB On-Premises configuration loaded
2025-09-02T12:49:00: ğŸ” [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-09-02T12:49:00: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-09-02T12:49:00: ğŸ” [FMB-CONFIG] Certificate length: 1004 characters
2025-09-02T12:49:00: 2025-09-02T19:49:00.996Z ğŸŸ¢ [FMB-ONPREM] FMB On-premises environment initialized
2025-09-02T12:49:00: 2025-09-02T19:49:00.997Z ğŸŸ¢ [CONFIG] FMB session secret validated successfully
2025-09-02T12:49:00: ğŸ”— Connecting to FMB MS SQL database...
2025-09-02T12:49:01: âœ… FMB Database connection established successfully
2025-09-02T12:49:01: 2025-09-02T19:49:01.098Z ğŸŸ¢ [DATABASE] FMB Database initialization completed successfully
2025-09-02T12:49:01: 2025-09-02T19:49:01.101Z ğŸŸ¢ [SESSION] FMB Enterprise Session configured for production mode
2025-09-02T12:49:01: 2025-09-02T19:49:01.101Z ğŸŸ¢ [SESSION] Using memory session store for development/testing
2025-09-02T12:49:01: Warning: connect.session() MemoryStore is not
2025-09-02T12:49:01: designed for a production environment, as it will leak
2025-09-02T12:49:01: memory, and will not scale past a single process.
2025-09-02T12:49:01: 2025-09-02T19:49:01.101Z ğŸŸ¢ [SESSION] Session store initialization completed
2025-09-02T12:49:01: 2025-09-02T19:49:01.102Z ğŸŸ¢ [SERVER] FMB Session middleware configured successfully
2025-09-02T12:49:01: 2025-09-02T19:49:01.104Z ğŸŸ¢ [SECURITY] Enterprise session security middleware activated
2025-09-02T12:49:01: ğŸš€ Setting up FMB SAML Authentication for On-Premises environment...
2025-09-02T12:49:01: 2025-09-02T19:49:01.106Z ğŸ”µ [FMB-SAML] Initializing FMB SAML Authentication
2025-09-02T12:49:01: ğŸ”§ [FMB-DATABASE] Creating new FMB storage instance...
2025-09-02T12:49:01: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: ğŸ“¡ version env with Radar: https://dotenvx.com/radar
2025-09-02T12:49:01: [dotenv@17.2.1] injecting env (0) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
2025-09-02T12:49:01: ğŸ¢ FMB On-Premises configuration loaded
2025-09-02T12:49:01: ğŸ” [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-09-02T12:49:01: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-09-02T12:49:01: ğŸ” [FMB-CONFIG] Certificate length: 1004 characters
2025-09-02T12:49:01: ğŸ”— [FMB-STORAGE] Connecting to FMB MS SQL Server...
2025-09-02T12:49:01: 2025-09-02T19:49:01.109Z ğŸŸ¢ [FMB-SAML] SAML Certificate validation {
2025-09-02T12:49:01:   "certLength": 1004,
2025-09-02T12:49:01:   "hasBeginMarker": true,
2025-09-02T12:49:01:   "hasEndMarker": true
2025-09-02T12:49:01: }
2025-09-02T12:49:01: 2025-09-02T19:49:01.110Z ğŸ”µ [FMB-SAML] FMB SAML Authentication setup completed
2025-09-02T12:49:01: ğŸ›¡ï¸ [SESSION-MGMT] Enterprise session management routes registered
2025-09-02T12:49:01: ğŸ›¡ï¸ [SESSION-MGMT] Enterprise session management routes registered
2025-09-02T12:49:01: 2025-09-02T19:49:01.116Z ğŸŸ¢ [SERVER] FMB TimeTracker running on http://0.0.0.0:3000
2025-09-02T12:49:01: 2025-09-02T19:49:01.116Z ğŸŸ¢ [SERVER] Environment: fmb-onprem
2025-09-02T12:49:01: 2025-09-02T19:49:01.116Z ğŸŸ¢ [FMB-ONPREM] On-premises deployment active - SAML authentication enabled
2025-09-02T12:49:01: 2025-09-02T19:49:01.186Z ğŸ—„ï¸ [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
2025-09-02T12:49:22: 2025-09-02T19:49:22.751Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:49:22:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:22:   "sessionId": "658a5a7ad606f2e54a4274e61e24175bba3aa694e2bfe58d1d122aab11c447e7",
2025-09-02T12:49:22:   "isAuthenticated": false
2025-09-02T12:49:22: }
2025-09-02T12:49:22: 2025-09-02T19:49:22.752Z ğŸŸ¡ [FMB-SAML] Unauthorized access attempt {
2025-09-02T12:49:22:   "path": "/api/auth/user",
2025-09-02T12:49:22:   "method": "GET",
2025-09-02T12:49:22:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:22:   "sessionId": "658a5a7ad606f2e54a4274e61e24175bba3aa694e2bfe58d1d122aab11c447e7"
2025-09-02T12:49:22: }
2025-09-02T12:49:22: 2025-09-02T19:49:22.770Z ğŸ”´ [FRONTEND-API] HTTP 401 error on https://timetracker.fmb.com/api/auth/user {
2025-09-02T12:49:22:   data: {
2025-09-02T12:49:22:     status: 401,
2025-09-02T12:49:22:     statusText: '',
2025-09-02T12:49:22:     errorMessage: 'Unauthorized - Please log in via SAML',
2025-09-02T12:49:22:     url: 'https://timetracker.fmb.com/api/auth/user'
2025-09-02T12:49:22:   },
2025-09-02T12:49:22:   url: 'https://timetracker.fmb.com/',
2025-09-02T12:49:22:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0',
2025-09-02T12:49:22:   ip: '192.168.209.85:61165',
2025-09-02T12:49:22:   sessionId: '7f76e42604c51001afcfb42b8abae4108fdc6e64d0151571b842b6e5101ab8e7'
2025-09-02T12:49:22: }
2025-09-02T12:49:27: 2025-09-02T19:49:27.719Z ğŸ”µ [FMB-SAML] SAML ACS callback received - IdP-initiated flow {
2025-09-02T12:49:27:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:27:   "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
2025-09-02T12:49:27:   "timestamp": "2025-09-02T19:49:27.719Z",
2025-09-02T12:49:27:   "hasBody": true,
2025-09-02T12:49:27:   "bodyKeys": [
2025-09-02T12:49:27:     "SAMLResponse"
2025-09-02T12:49:27:   ],
2025-09-02T12:49:27:   "headers": {
2025-09-02T12:49:27:     "content-type": "application/x-www-form-urlencoded",
2025-09-02T12:49:27:     "content-length": "8093"
2025-09-02T12:49:27:   }
2025-09-02T12:49:27: }
2025-09-02T12:49:27: 2025-09-02T19:49:27.835Z ğŸ”µ [FMB-SAML] SAML profile received {
2025-09-02T12:49:27:   "nameID": "Sravan.Modugula@fmb.com",
2025-09-02T12:49:27:   "email": "Sravan.Modugula@fmb.com",
2025-09-02T12:49:27:   "firstName": "Sravan",
2025-09-02T12:49:27:   "lastName": "Modugula"
2025-09-02T12:49:27: }
2025-09-02T12:49:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:27: 2025-09-02T19:49:27.938Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842567836-rgeu40', recordCount: 1 }
2025-09-02T12:49:27: ğŸ”„ [SQL] 
2025-09-02T12:49:27:  operation on users
2025-09-02T12:49:27: ğŸ—„ï¸ [SQL] Executing with 7 parameters
2025-09-02T12:49:27: âœ… [SQL] Operation completed: 1 rows affected
2025-09-02T12:49:27: 2025-09-02T19:49:27.984Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842567939-3kwi0u', recordCount: 0 }
2025-09-02T12:49:27: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: 2025-09-02T19:49:28.013Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842567984-dhtgfs', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.014Z ğŸ”µ [FMB-SAML] User upserted in database {
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.014Z ğŸ”µ [FMB-SAML] User authenticated and stored {
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.015Z ğŸŸ¢ [FMB-SAML] Serializing user for session {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "timestamp": "2025-09-02T19:49:28.015Z",
2025-09-02T12:49:28:   "source": "saml"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: ğŸ”µ [FMB-SAML] User session established and saved: Sravan.Modugula@fmb.com
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: 2025-09-02T19:49:28.081Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568052-stfjzy', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.081Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: 2025-09-02T19:49:28.198Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568168-i4ocpe', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.199Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.225Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568170-er1ju7', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.226Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.255Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568172-16g5f9', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.256Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.259Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568173-xefcxj', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.259Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.263Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568181-d2j4j7', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.263Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.264Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568185-42eq59', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.264Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.274Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568191-umouyc', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.274Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: 2025-09-02T19:49:28.446Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568417-bvzwz4', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.446Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.446Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:49:28:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:28:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:28:   "isAuthenticated": true
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.447Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: 2025-09-02T19:49:28.475Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568447-qvmmaa', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.488Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568458-v6tzbh', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.488Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: 2025-09-02T19:49:28.574Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568546-e6582j', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.575Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.575Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:49:28:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:28:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:28:   "isAuthenticated": true
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.575Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: 2025-09-02T19:49:28.579Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568549-549s2i', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.579Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.580Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/organizations {
2025-09-02T12:49:28:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:28:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:28:   "isAuthenticated": true
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.580Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.580Z ğŸ—„ï¸ [FMB-STORAGE] GET_USER_ORGS: Fetching organizations for user { userId: 'user-1756655138413' }
2025-09-02T12:49:28: 2025-09-02T19:49:28.582Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568550-82ts7e', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.583Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.583Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/dashboard/stats {
2025-09-02T12:49:28:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:28:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:28:   "isAuthenticated": true
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.583Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 3 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:28: 2025-09-02T19:49:28.585Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568553-7clxma', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.585Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.585Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/dashboard/project-breakdown {
2025-09-02T12:49:28:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:28:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:28:   "isAuthenticated": true
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.586Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.590Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568555-la1yhf', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.590Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.590Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/dashboard/recent-activity {
2025-09-02T12:49:28:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:28:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:28:   "isAuthenticated": true
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.591Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:28:   "userId": "user-1756655138413",
2025-09-02T12:49:28:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:28: }
2025-09-02T12:49:28: 2025-09-02T19:49:28.609Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568575-tc4pv7', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.614Z ğŸ—„ï¸ [FMB-STORAGE] GET_USER_ORGS: User organizations fetched successfully { userId: 'user-1756655138413', count: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.618Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568583-lwj7e6', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.619Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568584-omwakx', recordCount: 1 }
2025-09-02T12:49:28: 2025-09-02T19:49:28.620Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842568584-e928tk', recordCount: 1 }
2025-09-02T12:49:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:30: 2025-09-02T19:49:30.343Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842570313-k4n05n', recordCount: 1 }
2025-09-02T12:49:30: 2025-09-02T19:49:30.343Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:30:   "userId": "user-1756655138413",
2025-09-02T12:49:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:30: }
2025-09-02T12:49:30: 2025-09-02T19:49:30.343Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:49:30:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:30:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:30:   "isAuthenticated": true
2025-09-02T12:49:30: }
2025-09-02T12:49:30: 2025-09-02T19:49:30.343Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:30:   "userId": "user-1756655138413",
2025-09-02T12:49:30:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:30: }
2025-09-02T12:49:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:30: 2025-09-02T19:49:30.345Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842570317-lcbu3d', recordCount: 1 }
2025-09-02T12:49:30: 2025-09-02T19:49:30.345Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:30:   "userId": "user-1756655138413",
2025-09-02T12:49:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:30: }
2025-09-02T12:49:30: 2025-09-02T19:49:30.347Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842570316-4eylu9', recordCount: 1 }
2025-09-02T12:49:30: 2025-09-02T19:49:30.347Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:30:   "userId": "user-1756655138413",
2025-09-02T12:49:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:30: }
2025-09-02T12:49:30: 2025-09-02T19:49:30.347Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/users/current-role {
2025-09-02T12:49:30:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:30:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:30:   "isAuthenticated": true
2025-09-02T12:49:30: }
2025-09-02T12:49:30: 2025-09-02T19:49:30.347Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:30:   "userId": "user-1756655138413",
2025-09-02T12:49:30:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:30: }
2025-09-02T12:49:30: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:30: 2025-09-02T19:49:30.349Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842570317-z9qq3v', recordCount: 1 }
2025-09-02T12:49:30: 2025-09-02T19:49:30.349Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:30:   "userId": "user-1756655138413",
2025-09-02T12:49:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:30: }
2025-09-02T12:49:30: 2025-09-02T19:49:30.352Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842570324-3hae12', recordCount: 1 }
2025-09-02T12:49:30: 2025-09-02T19:49:30.352Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:30:   "userId": "user-1756655138413",
2025-09-02T12:49:30:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:30: }
2025-09-02T12:49:30: 2025-09-02T19:49:30.371Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842570343-i5ldgc', recordCount: 1 }
2025-09-02T12:49:30: 2025-09-02T19:49:30.374Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842570347-g6cf0h', recordCount: 1 }
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: 2025-09-02T19:49:33.263Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573235-1xu64d', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.264Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.264Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for POST /api/users/change-role {
2025-09-02T12:49:33:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:33:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:33:   "isAuthenticated": true
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.264Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: ğŸ—„ï¸ [FMB-STORAGE] UPDATE_USER_ROLE: { userId: 'user-1756655138413', role: 'admin' }
2025-09-02T12:49:33: âœ… [FMB-STORAGE] UPDATE_USER_ROLE: Role updated successfully
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: 2025-09-02T19:49:33.422Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573394-7ix98t', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.422Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.422Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/users/current-role {
2025-09-02T12:49:33:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:33:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:33:   "isAuthenticated": true
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.422Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: 2025-09-02T19:49:33.430Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573402-zi3czm', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.430Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.430Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:49:33:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:33:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:33:   "isAuthenticated": true
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.430Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: 2025-09-02T19:49:33.432Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573403-z01h9x', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.432Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.449Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573422-6jjfxf', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.459Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573431-r19pvg', recordCount: 1 }
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: 2025-09-02T19:49:33.535Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573507-1doa8l', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.535Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.536Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573509-zjzff4', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.536Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.538Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573510-ocenc5', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.538Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.540Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573511-o8irzk', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.541Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.541Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573512-5ecaay', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.541Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.543Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573515-5mytly', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.543Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.544Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573516-hmvw4c', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.545Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: 2025-09-02T19:49:33.681Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573654-2c5z7i', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.681Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.682Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:49:33:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:33:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:33:   "isAuthenticated": true
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.682Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: 2025-09-02T19:49:33.695Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573665-l503br', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.695Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.710Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573682-3b323u', recordCount: 1 }
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: 2025-09-02T19:49:33.840Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573812-12lnpu', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.841Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.841Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/users/current-role {
2025-09-02T12:49:33:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:33:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:33:   "isAuthenticated": true
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.841Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: 2025-09-02T19:49:33.843Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573810-9m8tx5', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.843Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.843Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:49:33:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:33:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:33:   "isAuthenticated": true
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.843Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:33: 2025-09-02T19:49:33.845Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573814-rc0ovb', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.845Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.846Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573814-jvldns', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.846Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:33:   "userId": "user-1756655138413",
2025-09-02T12:49:33:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:33: }
2025-09-02T12:49:33: 2025-09-02T19:49:33.871Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573841-qrruyp', recordCount: 1 }
2025-09-02T12:49:33: 2025-09-02T19:49:33.873Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842573843-4afhrr', recordCount: 1 }
2025-09-02T12:49:35: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:35: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:35: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:35: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:35: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:35: 2025-09-02T19:49:35.802Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842575773-8tzrdc', recordCount: 1 }
2025-09-02T12:49:35: 2025-09-02T19:49:35.802Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:35:   "userId": "user-1756655138413",
2025-09-02T12:49:35:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:35: }
2025-09-02T12:49:35: 2025-09-02T19:49:35.802Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/auth/user {
2025-09-02T12:49:35:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:35:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:35:   "isAuthenticated": true
2025-09-02T12:49:35: }
2025-09-02T12:49:35: 2025-09-02T19:49:35.802Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:35:   "userId": "user-1756655138413",
2025-09-02T12:49:35:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:35: }
2025-09-02T12:49:35: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:35: 2025-09-02T19:49:35.803Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842575775-j83dw7', recordCount: 1 }
2025-09-02T12:49:35: 2025-09-02T19:49:35.803Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:35:   "userId": "user-1756655138413",
2025-09-02T12:49:35:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:35: }
2025-09-02T12:49:35: 2025-09-02T19:49:35.804Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/organizations {
2025-09-02T12:49:35:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:35:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:35:   "isAuthenticated": true
2025-09-02T12:49:35: }
2025-09-02T12:49:35: 2025-09-02T19:49:35.804Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:35:   "userId": "user-1756655138413",
2025-09-02T12:49:35:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:35: }
2025-09-02T12:49:35: 2025-09-02T19:49:35.804Z ğŸ—„ï¸ [FMB-STORAGE] GET_USER_ORGS: Fetching organizations for user { userId: 'user-1756655138413' }
2025-09-02T12:49:35: 2025-09-02T19:49:35.805Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842575777-ch1myw', recordCount: 1 }
2025-09-02T12:49:35: 2025-09-02T19:49:35.805Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:35:   "userId": "user-1756655138413",
2025-09-02T12:49:35:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:35: }
2025-09-02T12:49:35: 2025-09-02T19:49:35.805Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/projects {
2025-09-02T12:49:35:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:35:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:35:   "isAuthenticated": true
2025-09-02T12:49:35: }
2025-09-02T12:49:35: 2025-09-02T19:49:35.806Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:35:   "userId": "user-1756655138413",
2025-09-02T12:49:35:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:35: }
2025-09-02T12:49:35: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:35: 2025-09-02T19:49:35.807Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842575778-8fh6l3', recordCount: 1 }
2025-09-02T12:49:35: 2025-09-02T19:49:35.807Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:35:   "userId": "user-1756655138413",
2025-09-02T12:49:35:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:35: }
2025-09-02T12:49:35: 2025-09-02T19:49:35.807Z ğŸŸ¢ [FMB-SAML] FMB Authentication check for GET /api/tasks/all {
2025-09-02T12:49:35:   "ip": "192.168.209.85:61165",
2025-09-02T12:49:35:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4",
2025-09-02T12:49:35:   "isAuthenticated": true
2025-09-02T12:49:35: }
2025-09-02T12:49:35: 2025-09-02T19:49:35.807Z ğŸŸ¢ [FMB-SAML] FMB Authentication successful {
2025-09-02T12:49:35:   "userId": "user-1756655138413",
2025-09-02T12:49:35:   "sessionId": "8d1eb44389ba3eb35ec35de66e3df22831296647257666cbaa1085c0d11653d4"
2025-09-02T12:49:35: }
2025-09-02T12:49:35: ğŸ“‹ Fetching all user tasks for user: user-1756655138413
2025-09-02T12:49:35: 2025-09-02T19:49:35.809Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842575780-s3gwme', recordCount: 1 }
2025-09-02T12:49:35: 2025-09-02T19:49:35.809Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:35:   "userId": "user-1756655138413",
2025-09-02T12:49:35:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:35: }
2025-09-02T12:49:35: 2025-09-02T19:49:35.831Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842575802-rvs1ap', recordCount: 1 }
2025-09-02T12:49:35: 2025-09-02T19:49:35.833Z ğŸ—„ï¸ [FMB-STORAGE] GET_USER_ORGS: User organizations fetched successfully { userId: 'user-1756655138413', count: 1 }
2025-09-02T12:49:35: âœ… Found tasks: 1
2025-09-02T12:49:35: 2025-09-02T19:49:35.839Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842575806-eoww7l', recordCount: 2 }
2025-09-02T12:49:39: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-09-02T12:49:39: 2025-09-02T19:49:39.525Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query completed successfully { executeId: 'exec-1756842579498-a4v0dm', recordCount: 1 }
2025-09-02T12:49:39: 2025-09-02T19:49:39.526Z ğŸŸ¢ [FMB-SAML] User deserialized successfully {
2025-09-02T12:49:39:   "userId": "user-1756655138413",
2025-09-02T12:49:39:   "email": "Sravan.Modugula@fmb.com"
2025-09-02T12:49:39: }

