2025-08-31T13:20:22: 2025-08-31T20:20:22.396Z ğŸŸ¢ [SERVER] Starting FMB TimeTracker On-Premises Application...
2025-08-31T13:20:22: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: ğŸ“¡ version env with Radar: https://dotenvx.com/radar
2025-08-31T13:20:22: [dotenv@17.2.1] injecting env (23) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
2025-08-31T13:20:22: ğŸ¢ FMB On-Premises configuration loaded
2025-08-31T13:20:22: ğŸ” [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-08-31T13:20:22: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-08-31T13:20:22: ğŸ” [FMB-CONFIG] Certificate length: 1004 characters
2025-08-31T13:20:22: 2025-08-31T20:20:22.403Z ğŸŸ¢ [FMB-ONPREM] FMB On-premises environment initialized
2025-08-31T13:20:22: 2025-08-31T20:20:22.403Z ğŸŸ¢ [CONFIG] FMB session secret validated successfully
2025-08-31T13:20:22: ğŸ”— Connecting to FMB MS SQL database...
2025-08-31T13:20:22: âœ… FMB Database connection established successfully
2025-08-31T13:20:22: 2025-08-31T20:20:22.509Z ğŸŸ¢ [DATABASE] FMB Database initialization completed successfully
2025-08-31T13:20:22: 2025-08-31T20:20:22.513Z ğŸŸ¢ [SESSION] FMB Enterprise Session configured for production mode
2025-08-31T13:20:22: 2025-08-31T20:20:22.513Z ğŸŸ¢ [SESSION] Initializing MS SQL session store for production
2025-08-31T13:20:22: 2025-08-31T20:20:22.515Z ğŸŸ¢ [SESSION] Custom MS SQL session store initialized successfully
2025-08-31T13:20:22: 2025-08-31T20:20:22.515Z ğŸŸ¢ [SESSION] Session store initialization completed
2025-08-31T13:20:22: 2025-08-31T20:20:22.515Z ğŸŸ¢ [SERVER] FMB Session middleware configured successfully
2025-08-31T13:20:22: 2025-08-31T20:20:22.518Z ğŸŸ¢ [SECURITY] Enterprise session security middleware activated
2025-08-31T13:20:22: ğŸš€ Setting up FMB SAML Authentication for On-Premises environment...
2025-08-31T13:20:22: 2025-08-31T20:20:22.521Z ğŸ”µ [FMB-SAML] Initializing FMB SAML Authentication
2025-08-31T13:20:22: ğŸ”§ [FMB-DATABASE] Creating new FMB storage instance...
2025-08-31T13:20:22: [dotenv@17.2.1] injecting env (0) from fmb-onprem\.env.fmb-onprem -- tip: ğŸ“¡ version env with Radar: https://dotenvx.com/radar
2025-08-31T13:20:22: [dotenv@17.2.1] injecting env (0) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
2025-08-31T13:20:22: ğŸ¢ FMB On-Premises configuration loaded
2025-08-31T13:20:22: ğŸ” [FMB-CONFIG] Looking for certificate at: C:\fmb-timetracker\saml_cert.pem
2025-08-31T13:20:22: âœ… [FMB-CONFIG] Certificate loaded successfully from: C:\fmb-timetracker\saml_cert.pem
2025-08-31T13:20:22: ğŸ” [FMB-CONFIG] Certificate length: 1004 characters
2025-08-31T13:20:22: ğŸ”— [FMB-STORAGE] Connecting to FMB MS SQL Server...
2025-08-31T13:20:22: 2025-08-31T20:20:22.525Z ğŸŸ¢ [FMB-SAML] SAML Certificate validation {
2025-08-31T13:20:22:   "certLength": 1004,
2025-08-31T13:20:22:   "hasBeginMarker": true,
2025-08-31T13:20:22:   "hasEndMarker": true
2025-08-31T13:20:22: }
2025-08-31T13:20:22: 2025-08-31T20:20:22.526Z ğŸ”µ [FMB-SAML] FMB SAML Authentication setup completed
2025-08-31T13:20:22: ğŸ›¡ï¸ [SESSION-MGMT] Enterprise session management routes registered
2025-08-31T13:20:22: ğŸ›¡ï¸ [SESSION-MGMT] Enterprise session management routes registered
2025-08-31T13:20:22: 2025-08-31T20:20:22.531Z ğŸŸ¢ [SERVER] FMB TimeTracker running on http://0.0.0.0:3000
2025-08-31T13:20:22: 2025-08-31T20:20:22.531Z ğŸŸ¢ [SERVER] Environment: fmb-onprem
2025-08-31T13:20:22: 2025-08-31T20:20:22.531Z ğŸŸ¢ [FMB-ONPREM] On-premises deployment active - SAML authentication enabled
2025-08-31T13:20:22: 2025-08-31T20:20:22.595Z ğŸ—„ï¸ [FMB-STORAGE] CONNECT: Successfully connected to MS SQL Server
2025-08-31T13:20:22: ğŸŸ¢ [FMB-SESSION] Session table structure verified
2025-08-31T13:20:47: ğŸ—„ï¸ [SQL] Executing with 1 parameters
2025-08-31T13:20:47: âŒ [EXECUTE-exec-1756671647166-rtcend] Query execution failed: {
2025-08-31T13:20:47:   error: 'The parameter name param0 has already been declared. Parameter names must be unique',
2025-08-31T13:20:47:   code: 'EDUPEPARAM',
2025-08-31T13:20:47:   number: undefined,
2025-08-31T13:20:47:   severity: undefined,
2025-08-31T13:20:47:   state: undefined,
2025-08-31T13:20:47:   procedure: undefined,
2025-08-31T13:20:47:   lineNumber: undefined,
2025-08-31T13:20:47:   query: 'SELECT * FROM users WHERE id = @param0',
2025-08-31T13:20:47:   paramCount: 1,
2025-08-31T13:20:47:   paramValues: [ 'user-1756655138413' ]
2025-08-31T13:20:47: }
2025-08-31T13:20:47: 2025-08-31T20:20:47.167Z ğŸ—„ï¸ [FMB-STORAGE] EXECUTE: Query execution failed {
2025-08-31T13:20:47:   executeId: 'exec-1756671647166-rtcend',
2025-08-31T13:20:47:   error: 'The parameter name param0 has already been declared. Parameter names must be unique',
2025-08-31T13:20:47:   code: 'EDUPEPARAM',
2025-08-31T13:20:47:   query: 'SELECT * FROM users WHERE id = @param0...'
2025-08-31T13:20:47: }
2025-08-31T13:20:47: 2025-08-31T20:20:47.168Z ğŸ”´ [FMB-SAML] Error during user deserialization {
2025-08-31T13:20:47:   "userId": "user-1756655138413",
2025-08-31T13:20:47:   "error": "The parameter name param0 has already been declared. Parameter names must be unique"
2025-08-31T13:20:47: }
2025-08-31T13:20:47: RequestError: The parameter name param0 has already been declared. Parameter names must be unique
2025-08-31T13:20:47:     at Request.input (C:\fmb-timetracker\node_modules\mssql\lib\base\request.js:129:13)
2025-08-31T13:20:47:     at file:///C:/fmb-timetracker/dist/index.js:301:21
2025-08-31T13:20:47:     at Array.forEach (<anonymous>)
2025-08-31T13:20:47:     at FmbStorage.execute (file:///C:/fmb-timetracker/dist/index.js:300:18)
2025-08-31T13:20:47:     at FmbStorage.getUser (file:///C:/fmb-timetracker/dist/index.js:339:35)
2025-08-31T13:20:47:     at file:///C:/fmb-timetracker/dist/index.js:1968:38
2025-08-31T13:20:47:     at pass (C:\fmb-timetracker\node_modules\passport\lib\authenticator.js:372:9)
2025-08-31T13:20:47:     at Authenticator.deserializeUser (C:\fmb-timetracker\node_modules\passport\lib\authenticator.js:377:5)
2025-08-31T13:20:47:     at SessionStrategy.authenticate (C:\fmb-timetracker\node_modules\passport\lib\strategies\session.js:112:10)
2025-08-31T13:20:47:     at attempt (C:\fmb-timetracker\node_modules\passport\lib\middleware\authenticate.js:378:16)
